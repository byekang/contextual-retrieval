{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "4d7cfd55-6998-44b4-8d2d-e9a40968b4d7",
   "metadata": {},
   "source": [
    "# RAG with Contextual Retrieval\n",
    "\n",
    "이번에는 Anthropic의 Contextual Retrieval의 개념을 이용해서 Chunk에 Parent doc을 머지해서 테스트를 진행해봤습니다.\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "7c4ffa62-6d64-4e04-9da7-b2361b63862b",
   "metadata": {},
   "source": [
    "# Configuring Environment"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "05f4051f-8df1-41f1-8683-df7ca86c5351",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "%%capture\n",
    "!pip install langchain"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "5624febf-577a-477b-be97-03348edfffe5",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "%%capture\n",
    "!pip install -U langchain-community"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "bc79b16a-8591-4dfe-9aaa-73a29dded6f1",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "import os\n",
    "from langchain.text_splitter import RecursiveCharacterTextSplitter\n",
    "from langchain.document_loaders import PyPDFLoader\n",
    "from langchain.prompts import PromptTemplate\n",
    "from langchain.embeddings.bedrock import BedrockEmbeddings\n",
    "from langchain.llms.bedrock import Bedrock\n",
    "from langchain.chains import RetrievalQA\n",
    "from langchain_community.chat_models import BedrockChat\n",
    "import boto3"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "000b903c-1119-4169-b9dc-81ed19189b56",
   "metadata": {},
   "source": [
    "# AWS Bedrock Client Connection with boto3"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "d3d7aebd-c80b-4fc5-9906-60ba452d46ec",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "%%capture\n",
    "!pip install termcolor"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "5e63419a-0fbf-473d-a033-3abf08fd0afe",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "%%capture\n",
    "!pip install langchain_aws"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "c694eccd-d1fa-42bf-b372-8dbc25083bb3",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "import json\n",
    "import boto3\n",
    "from pprint import pprint\n",
    "from termcolor import colored\n",
    "\n",
    "bedrock_client = boto3.client(service_name='bedrock-runtime')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "2d8c38e5-be8f-4960-820e-502ba35ca6b5",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "ChatBedrock(callbacks=[<langchain_core.callbacks.streaming_stdout.StreamingStdOutCallbackHandler object at 0x7fa25118b250>], client=<botocore.client.BedrockRuntime object at 0x7fa225590a90>, model_id='anthropic.claude-3-5-sonnet-20240620-v1:0', model_kwargs={'stop_sequences': ['\\n\\nHuman']}, streaming=True, max_tokens=2048)"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from langchain_aws import ChatBedrock\n",
    "from langchain.callbacks.streaming_stdout import StreamingStdOutCallbackHandler### LLM 로딩 (Claude-v3-sonnet)\n",
    "\n",
    "from langchain_aws import ChatBedrock\n",
    "from langchain.callbacks.streaming_stdout import StreamingStdOutCallbackHandler\n",
    "\n",
    "llm_text = ChatBedrock(\n",
    "    model_id=\"anthropic.claude-3-5-sonnet-20240620-v1:0\",\n",
    "    client=bedrock_client,\n",
    "    streaming=True,\n",
    "    callbacks=[StreamingStdOutCallbackHandler()],\n",
    "    model_kwargs={\n",
    "        \"max_tokens\": 2048,\n",
    "        \"stop_sequences\": [\"\\n\\nHuman\"],\n",
    "        # \"temperature\": 0,\n",
    "        # \"top_k\": 350,\n",
    "        # \"top_p\": 0.999\n",
    "    }\n",
    ")\n",
    "llm_text"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "70771a14-7774-4b24-8388-8ab6aa4dd104",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "ChatBedrock(callbacks=[<langchain_core.callbacks.streaming_stdout.StreamingStdOutCallbackHandler object at 0x7fa224df0340>], client=<botocore.client.BedrockRuntime object at 0x7fa225590a90>, model_id='anthropic.claude-3-haiku-20240307-v1:0', model_kwargs={'stop_sequences': ['\\n\\nHuman']}, streaming=True, max_tokens=2048)"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "llm_haiku = ChatBedrock(\n",
    "    model_id=\"anthropic.claude-3-haiku-20240307-v1:0\",\n",
    "    client=bedrock_client,\n",
    "    streaming=True,\n",
    "    callbacks=[StreamingStdOutCallbackHandler()],\n",
    "    model_kwargs={\n",
    "        \"max_tokens\": 2048,\n",
    "        \"stop_sequences\": [\"\\n\\nHuman\"],\n",
    "        # \"temperature\": 0,\n",
    "        # \"top_k\": 350,\n",
    "        # \"top_p\": 0.999\n",
    "    }\n",
    ")\n",
    "llm_haiku"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "0dd02dbf-424d-40e6-9f88-918c44d0518a",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "AIMessage(content='The basic recipe for mayonnaise is:\\n\\nIngredients:\\n- 1 egg yolk\\n- 1 tsp Dijon mustard\\n- 1 tbsp lemon juice or white wine vinegar\\n- 1 cup vegetable oil (such as canola or grapeseed oil)\\n- Salt and pepper to taste\\n\\nInstructions:\\n1. In a medium bowl, whisk together the egg yolk, mustard, and lemon juice/vinegar until well combined.\\n2. Very slowly, while whisking constantly, drizzle in the vegetable oil a few drops at a time. As the emulsion forms, you can start adding the oil in a thin stream, continuing to whisk vigorously.\\n3. Once all the oil is incorporated, the mayonnaise should be thick and creamy. Season with salt and pepper to taste.\\n4. Store in the refrigerator for up to 1 week.\\n\\nThe key techniques are:\\n- Using a whole egg yolk, not just the whites\\n- Adding the oil very slowly at first to help the emulsion form\\n- Whisking constantly to incorporate the oil fully\\n\\nThis produces a classic, creamy homemade mayonnaise. You can adjust the flavors by using different oils, adding herbs, spices, etc.', additional_kwargs={}, response_metadata={'stop_reason': 'stop_sequence', 'stop_sequence': '\\n\\nHuman'}, id='run-47cacce7-7187-4ca0-9666-64d1e2e74cc9-0', usage_metadata={'input_tokens': 16, 'output_tokens': 287, 'total_tokens': 303})"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "llm_haiku.invoke(input=\"What is the recipe of mayonnaise?\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "id": "29faca0d-abe7-4942-b5fd-f9a4f7685a82",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Bedrock Embeddings Model Loaded\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/tmp/ipykernel_14356/3925743753.py:3: LangChainDeprecationWarning: The class `BedrockEmbeddings` was deprecated in LangChain 0.2.11 and will be removed in 1.0. An updated version of the class exists in the :class:`~langchain-aws package and should be used instead. To use it run `pip install -U :class:`~langchain-aws` and import as `from :class:`~langchain_aws import BedrockEmbeddings``.\n",
      "  llm_emb = BedrockEmbeddings(\n"
     ]
    }
   ],
   "source": [
    "from langchain.embeddings import BedrockEmbeddings\n",
    "\n",
    "llm_emb = BedrockEmbeddings(\n",
    "    client=bedrock_client,\n",
    "    model_id=\"Titan-Embeddings-G1\"\n",
    ")\n",
    "dimension = 1536\n",
    "print(\"Bedrock Embeddings Model Loaded\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "09d0fa5c-41dc-4125-b8e3-792729e5079b",
   "metadata": {
    "tags": []
   },
   "source": [
    "# PDF Files Loading with PyMuPDF"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "id": "3e6f83aa-5ff9-4aee-bcd3-c6eaaf32e5d1",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "%%capture\n",
    "!pip install pymupdf4llm"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "726c6fe5-ae38-4755-99cf-f7dfe6dafb64",
   "metadata": {
    "tags": []
   },
   "source": [
    "### PDF를 파싱해서 Markdown file로 변환합니다."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 43,
   "id": "4000d68b-d223-4a9f-b762-1d20b7abf260",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "--2024-11-10 19:54:57--  https://byekang-share-materials.s3.ap-northeast-2.amazonaws.com/file-public-share/20120401_LIG_House_Fire_Insurance_Pol_Condition.pdf\n",
      "Resolving byekang-share-materials.s3.ap-northeast-2.amazonaws.com (byekang-share-materials.s3.ap-northeast-2.amazonaws.com)... 3.5.186.151, 3.5.140.189, 3.5.144.243, ...\n",
      "Connecting to byekang-share-materials.s3.ap-northeast-2.amazonaws.com (byekang-share-materials.s3.ap-northeast-2.amazonaws.com)|3.5.186.151|:443... connected.\n",
      "HTTP request sent, awaiting response... 200 OK\n",
      "Length: 426490 (416K) [application/pdf]\n",
      "Saving to: ‘20120401_LIG_House_Fire_Insurance_Pol_Condition.pdf’\n",
      "\n",
      "100%[======================================>] 426,490      478KB/s   in 0.9s   \n",
      "\n",
      "2024-11-10 19:54:59 (478 KB/s) - ‘20120401_LIG_House_Fire_Insurance_Pol_Condition.pdf’ saved [426490/426490]\n",
      "\n",
      "--2024-11-10 19:54:59--  https://byekang-share-materials.s3.ap-northeast-2.amazonaws.com/file-public-share/20120401_LIG_House_Fire_Insurance_Pol_Condition_1-4.pdf\n",
      "Resolving byekang-share-materials.s3.ap-northeast-2.amazonaws.com (byekang-share-materials.s3.ap-northeast-2.amazonaws.com)... 3.5.184.201, 52.219.146.62, 3.5.186.243, ...\n",
      "Connecting to byekang-share-materials.s3.ap-northeast-2.amazonaws.com (byekang-share-materials.s3.ap-northeast-2.amazonaws.com)|3.5.184.201|:443... connected.\n",
      "HTTP request sent, awaiting response... 200 OK\n",
      "Length: 142112 (139K) [application/pdf]\n",
      "Saving to: ‘20120401_LIG_House_Fire_Insurance_Pol_Condition_1-4.pdf’\n",
      "\n",
      "100%[======================================>] 142,112      270KB/s   in 0.5s   \n",
      "\n",
      "2024-11-10 19:55:00 (270 KB/s) - ‘20120401_LIG_House_Fire_Insurance_Pol_Condition_1-4.pdf’ saved [142112/142112]\n",
      "\n"
     ]
    }
   ],
   "source": [
    "!wget https://byekang-share-materials.s3.ap-northeast-2.amazonaws.com/file-public-share/20120401_LIG_House_Fire_Insurance_Pol_Condition.pdf -O 20120401_LIG_House_Fire_Insurance_Pol_Condition.pdf\n",
    "!wget https://byekang-share-materials.s3.ap-northeast-2.amazonaws.com/file-public-share/20120401_LIG_House_Fire_Insurance_Pol_Condition_1-4.pdf -O 20120401_LIG_House_Fire_Insurance_Pol_Condition_1-4.pdf"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "id": "cf7c6fa9-7ac2-4965-8637-36f737977247",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "import pymupdf4llm\n",
    "md_text = pymupdf4llm.to_markdown(\"20120401_LIG_House_Fire_Insurance_Pol_Condition_1-4.pdf\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "3bac8bba-982b-4d70-9019-888b686b9974",
   "metadata": {
    "tags": []
   },
   "source": [
    "### Markdown file로 잘 변화되었는지를 확인하기 위해서 화면으로 display해 봅니다."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "id": "86a6de42-aebe-4f68-8f93-a69f32f9919a",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "import re\n",
    "md_text = re.sub('LIG주택화재보험 보통약관', '# LIG주택화재보험 보통약관', md_text)\n",
    "md_text = re.sub(r'\\n제([0-9]*)조\\((.*)\\)\\n', r'\\n# 제\\1조(\\2)\\n', md_text)\n",
    "md_text = re.sub(r'\\n제([0-9]*)조\\[(.*)\\]\\n', r'\\n# 제\\1조[\\2]\\n', md_text)\n",
    "md_text = re.sub(r'\\n([①②③④⑤])', r'\\n## \\1\\n', md_text)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "id": "0d530f14-5aa8-4a95-bffc-28b7c6d7aba4",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "19433"
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "import pathlib\n",
    "pathlib.Path(\"output.md\").write_bytes(md_text.encode())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "id": "c9165bc1-565e-487c-a7c2-ab966342c89b",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "# LIG주택화재보험 보통약관\n",
       "\n",
       "# 제1조(보험계약의 성립)\n",
       "## ①\n",
       " 보험계약은 보험계약자의 청약과 보험회사의 승낙으로 이루어집니다.(이하 “ 보험계약”은 “ 계약”, “ 보\n",
       "\n",
       "험계약자” 는 “ 계약자” , “ 보험회사” 는 “ 회사” 라 합니다)\n",
       "\n",
       "## ②\n",
       " 회사는 계약의 청약을 받고 보험료 전액(보험료를 일시에 지급하기로 약정한 경우) 또는 제1회 보험\n",
       "\n",
       "료(보험료를 분납하기로 약정한 경우)(이하 ‘ 제1회 보험료 등’ 이라 합니다)를 받은 경우에는 청약일\n",
       "부터 30일 이내에 승낙 또는 거절의 통지를 하며 통지가 없으면 승낙한 것으로 봅니다.\n",
       "\n",
       "## ③\n",
       " 회사가 청약을 승낙한 때에는 지체 없이 보험증권(보험가입증서)을 계약자에게 교부하여 드리며, 청\n",
       "\n",
       "약을 거절한 경우에는 거절통지와 함께 받은 금액을 계약자에게 돌려드립니다.\n",
       "\n",
       "## ④\n",
       " 이미 성립한 계약을 연장하거나 변경하는 경우에는 회사는 보험증권(보험가입증서)에 그 사실을 기\n",
       "\n",
       "재함으로써 보험증권(보험가입증서)의 교부에 대신할 수 있습니다.\n",
       "\n",
       "# 제2조(약관교부 및 설명의무 등)\n",
       "## ①\n",
       " 회사는 계약자가 청약한 경우 계약자에게 약관 및 계약자 보관용 청약서(청약서 부본)를 드리고 약\n",
       "\n",
       "관의 중요한 내용을 설명하여 드립니다. 다만, 전화․ 우편․ 컴퓨터 등의 통신매체를 통한 보험계약\n",
       "(이하 “ 통신판매 계약” 이라 합니다)의 경우에는 회사는 계약자의 동의를 얻어 다음 중 한 가지 방\n",
       "법으로 할 수 있습니다.\n",
       "\n",
       "1. 광기록매체 또는 전자우편 등의 전자적 방법으로 약관이나 계약자 보관용 청약서(청약서 부본)를\n",
       "\n",
       "송부하는 방법. 이 경우 계약자 또는 그 대리인이 이를 수신한 때에 당해 약관이나 계약자 보관용\n",
       "청약서(청약서 부본)를 드린 것으로 봅니다.\n",
       "\n",
       "2. 사이버몰(컴퓨터를 이용하여 보험거래를 할 수 있도록 설정된 가상의 영업장)에서 약관 및 그 설명\n",
       "\n",
       "문(약관의 중요한 내용을 알 수 있도록 설명한 문서)을 읽거나 내려받게 하는 방법. 이 경우 계약\n",
       "자가 이를 읽거나 내려받은 것을 확인한 때에 당해 약관을 드리고 그 중요한 내용을 설명한 것으\n",
       "로 봅니다.\n",
       "\n",
       "3. 전화를 이용하여 청약내용, 보험료납입, 보험기간, 계약전 알릴의무, 약관의 중요한 내용 등 계약\n",
       "\n",
       "체결을 위하여 필요한 사항을 질문 또는 설명하는 방법. 이 경우 계약자의 답변과 확인내용을 음성\n",
       "녹음함으로써 약관의 중요한 내용을 설명한 것으로 봅니다.\n",
       "\n",
       "## ②\n",
       " 회사가 제1항에 의해 제공될 약관 및 계약자 보관용 청약서(청약서 부본)를 청약 시 계약자에게 드\n",
       "\n",
       "리지 아니하거나 약관의 중요한 내용을 설명하지 아니한 때 또는 계약을 체결할 때 계약자가 청약서\n",
       "에 자필서명[날인(도장을 찍음) 또는 전자서명법 제2조 제10호의 규정에 의한 공인인증기관이 인증\n",
       "한 전자서명을 포함합니다)]을 하지 아니한 때에는 계약자는 계약체결일부터 1개월 이내에 계약을\n",
       "취소할 수 있습니다.\n",
       "\n",
       "## ③\n",
       " 제2항에 따라 계약이 취소된 경우에는 회사는 이미 납입한 보험료를 계약자에게 돌려드리며, 보험료\n",
       "\n",
       "를 받은 기간에 대하여 보험개발원이 공시하는 정기예금이율을 연단위 복리로 계산한 금액을 더하여\n",
       "지급합니다.\n",
       "\n",
       "# 제3조(제1회 보험료 등 및 회사의 보장개시)\n",
       "## ①\n",
       " 회사는 계약의 청약을 승낙하고 제1회 보험료 등을 받은 때부터 이 약관이 정한 바에 따라 보장을\n",
       "\n",
       "합니다.\n",
       "\n",
       "## ②\n",
       " 회사가 계약자로부터 계약의 청약과 함께 제1회 보험료 등을 받은 경우에 그 청약을 승낙하기 전에\n",
       "\n",
       "계약에서 정한 보험금 지급사유가 생긴 때에는 회사는 계약상의 보장을 합니다.\n",
       "\n",
       "## ③\n",
       " 제2항의 규정에도 불구하고 회사는 다음 중 한 가지에 해당되는 경우에는 보장을 하지 아니합니다.\n",
       "\n",
       "1. 제14조(계약전 알릴 의무)의 규정에 의하여 계약자 또는 피보험자가 회사에 알린 내용이 보험금\n",
       "\n",
       "지급사유의 발생에 영향을 미쳤음을 회사가 증명하는 경우\n",
       "\n",
       "2. 제12조(보상하지 아니하는 손해), 제16조(계약의 해지), 제18조(계약의 무효) 또는 제27조(사기에\n",
       "\n",
       "의한 계약)의 규정을 준용하여 회사가 보장을 하지 아니할 수 있는 경우\n",
       "\n",
       "## ④\n",
       " 계약자가 제1회 보험료 등을 자동이체 또는 신용카드로 납입하는 경우에는 자동이체신청 및 신용카\n",
       "\n",
       "드매출 승인에 필요한 정보를 회사에 제공한 때가 제1회 보험료 등을 납입한 때가 되나, 계약자의\n",
       "귀책사유로 자동이체 또는 매출승인이 불가능한 경우에는 제1회 보험료 등이 납입되지 않은 것으로\n",
       "봅니다.\n",
       "\n",
       "\n",
       "-----\n",
       "\n",
       "## ⑤\n",
       " 계약이 갱신되는 경우에는 제1항 내지 제3항에 의한 보장은 기존 계약에 의한 보장이 종료하는 때부\n",
       "\n",
       "터 적용합니다.\n",
       "\n",
       "# 제4조(제2회 이후 보험료의 납입)\n",
       "계약자는 제2회 이후의 보험료를 계약 체결시 납입하기로 약속한 날(이하฀납입기일฀이라 합니다)까\n",
       "지 납입하여야 하며, 회사는 계약자가 보험료를 납입한 경우에는 영수증을 발행하여 드립니다. 다만, 금\n",
       "융회사(우체국을 포함합니다)룰 통하여 보험료를 납입한 경우에는 그 금융회사 발행 증빙서류를 영수증\n",
       "으로 대신합니다.\n",
       "\n",
       "# 제5조(청약의 철회)\n",
       "## ①\n",
       " 가계성 보험[개인의 일상생활과 관련된 보험으로 보험료를 단체 또는 법인이 부담하지 않는 개인보\n",
       "\n",
       "험계약과 단체요율(피보험자가 단체인 계약에 적용되는 요율)이 적용되지 않는 계약을 말합니다]에\n",
       "한하여 계약자는 청약을 한 날부터 15일 이내에 그 청약을 철회할 수 있습니다. 다만, 단체(취급)계\n",
       "약 또는 보험기간이 1년 미만인 계약의 경우에는 청약을 철회할 수 없으며, 통신판매 계약(보험기간\n",
       "이 1년 이상인 계약에 한함)의 경우에는 청약을 한 날부터 30일 이내에 그 청약을 철회할 수 있습니\n",
       "다.\n",
       "\n",
       "## ②\n",
       " 회사는 청약의 철회를 접수한 경우에는 3일 이내에 이미 납입한 보험료를 계약자에게 돌려 드리며,\n",
       "\n",
       "보험료 반환이 지체된 기간에 대하여는 보험개발원이 공시하는 정기예금이율을 연단위 복리로 계산\n",
       "한 금액을 더하여 지급합니다. 다만, 계약자가 제1회 보험료 등을 신용카드로 납입한 계약의 청약을\n",
       "철회하는 경우에 회사는 신용카드의 매출을 취소하며 이자를 더하여 지급하지 아니합니다.\n",
       "\n",
       "## ③\n",
       " 청약을 철회할 당시에 이미 보험금 지급사유가 발생하였으나 계약자가 그 보험금 지급사유의 발생사\n",
       "\n",
       "실을 알지 못한 경우에는 청약철회의 효력은 발생하지 않습니다.\n",
       "\n",
       "# 제6조(계약내용의 변경 등)\n",
       "## ①\n",
       " 계약자는 회사의 승낙을 얻어 다음의 사항을 변경할 수 있습니다. 이 경우 승낙을 서면 등으로 알리\n",
       "\n",
       "거나 보험증권(보험가입증서)의 뒷면에 기재하여 드립니다.\n",
       "\n",
       "1. 보험종목\n",
       "2. 보험기간\n",
       "3. 보험료 납입주기, 수금방법 및 납입기간\n",
       "4. 계약자, 피보험자, 보험가입금액 등 기타 계약의 내용\n",
       "\n",
       "## ②\n",
       " 회사는 계약자가 제1회 보험료 등을 납입한 때부터 1년 이상 경과된 유효한 계약으로서 그 보험종목\n",
       "\n",
       "의 변경을 요청할 때에는 회사의 사업방법서에서 정하는 방법에 따라 이를 변경하여 드립니다.\n",
       "\n",
       "## ③\n",
       " 회사는 계약자가 제1항 제4호의 규정에 의하여 보험가입금액을 감액하고자 할 때에는 그 감액된 부\n",
       "\n",
       "분은 계약이 해지된 것으로 보며, 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는 19조\n",
       "(보험료의 환급)에 따라 이를 계약자에게 지급합니다.\n",
       "\n",
       "# 제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
       "## ①\n",
       " 계약자가 제2회 이후의 보험료를 납입기일까지 납입하지 아니하여 보험료 납입이 연체 중인 경우에\n",
       "\n",
       "는, 회사는 14일(보험기간이 1년 미만인 경우에는 7일) 이상의 기간을 납입최고(독촉)기간으로 정하\n",
       "여 계약자(타인을 위한 계약의 경우 그 특정된 타인을 포함합니다)에게 다음의 내용을 서면(등기우편\n",
       "등), 전화(음성녹음) 또는 전자문서 등으로 알려드립니다. 다만, 계약이 해지되기 전에 발생한 보험금\n",
       "지급사유에 대하여 회사는 계약상의 보장을 합니다.\n",
       "\n",
       "1. 납입최고(독촉)기간 안에 연체보험료를 납입하여야 한다는 내용\n",
       "2. 납입최고(독촉)기간이 끝나는 날까지 보험료를 납입하지 아니할 경우 그 끝나는 날의 다음날에 계\n",
       "\n",
       "약이 해지된다는 내용\n",
       "\n",
       "3. 계약자가 회사로부터 보험계약대출을 받은 경우에는, 계약이 해지되는 즉시 해지환급금에서 보험계\n",
       "\n",
       "약대출 원리금이 차감된다는 내용\n",
       "\n",
       "## ②\n",
       " 제1항의 납입최고(독촉)기간은 납입최고(독촉)의 통지가 계약자(타인을 위한 계약의 경우에는 그 특\n",
       "\n",
       "정된 타인을 포함)에게 도달한 날부터 시작되며, 그 기간의 말일(말일이 토요일 또는 공휴일인 경우\n",
       "에는 그 다음의 최초의 평일)에 끝납니다.\n",
       "\n",
       "## ③\n",
       " 회사가 제1항에 의한 납입최고(독촉) 등을 전자문서로 안내하고자 할 경우에는 계약자의 서면에 의\n",
       "\n",
       "한 동의를 얻어 수신확인을 조건으로 전자문서를 송신하여야 하며, 계약자가 전자문서에 대하여 수\n",
       "신을 확인하기 전까지는 그 전자문서는 송신되지 아니한 것으로 봅니다. 회사는 전자문서가 수신되\n",
       "\n",
       "\n",
       "-----\n",
       "\n",
       "지 아니한 것으로 확인되는 경우에는 제1항의 납입최고(독촉)기간을 설정하여 제1항에서 정한 내용\n",
       "을 서면(등기우편 등) 또는 전화(음성녹음)로 다시 알려 드립니다.\n",
       "\n",
       "## ④\n",
       " 제1항에 따라 계약이 해지된 경우에는 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는\n",
       "\n",
       "제19조(보험료의 환급)에 따라 이를 계약자에게 지급합니다.\n",
       "\n",
       "# 제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]\n",
       "## ①\n",
       " 제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]에 따라 계약이 해지되었으나 계약자가\n",
       "\n",
       "제19조(보험료의 환급)에 따른 환급금을 받지 아니한 경우 계약자는 해지된 날부터 2년 이내에 회사\n",
       "가 정한 절차에 따라 계약의 부활(효력회복)을 청약할 수 있습니다. 이 경우 회사가 그 청약을 승낙\n",
       "한 때에는 계약자는 부활(효력회복)을 청약한 날까지의 연체된 보험료에 보험개발원이 공시하는 정\n",
       "기예금이율 + 1% 범위내에서 각 상품별로 회사가 정하는 이율로 계산한 금액을 더하여 납입하여야\n",
       "합니다.\n",
       "\n",
       "## ②\n",
       " 제1항에 따라 해지계약을 부활(효력회복)하는 경우에는 제1조(보험계약의 성립), 제3조(제1회 보험료\n",
       "\n",
       "등 및 회사의 보장개시), 제14조(계약 전 알릴의무) 및 제16조(계약의 해지)의 규정을 준용합니다.\n",
       "\n",
       "# 제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\n",
       "## ①\n",
       " 타인을 위한 계약의 경우 제19조(보험료의 환급)에 따른 계약자의 해지환급금 청구권에 대한 강제집\n",
       "\n",
       "행, 담보권실행, 국세 및 지방세 체납처분절차에 의해 계약이 해지된 경우에는, 회사는 해지 당시의\n",
       "피보험자가 계약자의 동의를 얻어 계약 해지로 회사가 채권자에게 지급한 금액을 회사에게 지급하고\n",
       "제6조(계약내용의 변경 등) 제1항의 절차에 따라 계약자 명의를 피보험자로 변경하여 계약의 특별부\n",
       "활(효력회복)을 청약할 수 있음을 피보험자에게 통지하여야 합니다.\n",
       "\n",
       "## ②\n",
       " 회사는 제1항에 의한 계약자 명의변경 신청 및 계약의 특별부활(효력회복) 청약을 승낙하며, 계약은\n",
       "\n",
       "청약한 때부터 특별부활(효력회복) 됩니다.\n",
       "\n",
       "## ③\n",
       " 회사는 제1항의 통지를 계약이 해지된 날부터 7일 이내에 하여야 합니다. 다만, 회사의 통지가 7일\n",
       "\n",
       "을 경과하여 도달하고 이후 피보험자가 제1항에 의한 계약자 명의변경 신청 및 계약의 특별부활(효\n",
       "력회복)을 청약한 경우에는 계약이 해지된 날부터 7일이 되는 날에 특별부활(효력회복) 됩니다.\n",
       "\n",
       "## ④\n",
       " 피보험자는 통지를 받은 날부터 15일 이내에 제1항의 절차를 이행할 수 있습니다.\n",
       "\n",
       "# 제10조(보험목적의 범위)\n",
       "## ①\n",
       "이 약관에서 보험의 목적이라 함은 이 약관에 따라 보험에 가입한 물건으로서 보험증권(보험가입증\n",
       "\n",
       "서)에 기재된 건물 등을 말합니다.\n",
       "\n",
       "1. 주택으로만 쓰이는 건물 중 다음의 것 또는 그 수용가재\n",
       "\n",
       "(ⅰ) 단독주택\n",
       "(ⅱ) 주택의 부속건물로서 가재만을 수용하는데 쓰이는 것\n",
       "(ⅲ) 연립(다세대)주택, 아파트로서 각 호(戶), 실(室)이 모두 주택으로만 쓰이는 것\n",
       "\n",
       "2. 주택병용 물건으로서 아래의 용도로 사용하는 건물 및 그 수용가재\n",
       "\n",
       "(ⅰ) 교습소(피아노, 꽃꽂이, 국악, 재봉 및 이와 비슷한 것)\n",
       "(ⅱ) 치료(안수, 침구(침질,뜸질), 정골, 조산원 및 이와 비슷한 것)\n",
       "\n",
       "## ②\n",
       " 아래의 물건은 보험증권(보험가입증서)에 기재하여야만 보험의 목적이 됩니다.\n",
       "\n",
       "1. 통화, 유가증권, 인지, 우표 및 이와 비슷한 것\n",
       "2. 귀금속, 귀중품(무게나 부피가 휴대할 수 있으며 점당 300만원 이상), 보옥, 보석, 글․ 그림, 골동품,\n",
       "\n",
       "조각물 및 이와 비슷한 것\n",
       "\n",
       "3. 원고, 설계서, 도안, 물건의 원본, 모형, 증서, 장부, 금형(쇠틀), 목형(나무틀), 소프트웨어 및 이와\n",
       "\n",
       "비슷한 것\n",
       "\n",
       "## ③\n",
       " 아래의 물건은 다른 약정이 없으면 보험의 목적에 포함됩니다.\n",
       "\n",
       "1. 건물인 경우\n",
       "(ⅰ)건물의 부속물: 피보험자의 소유인 칸막이, 대문, 담, 곳간 및 이와 비슷한 것\n",
       "(ⅱ)건물의 부착물: 피보험자 소유인 간판, 네온사인, 안테나, 선전탑 및 이와 비슷한 것\n",
       "2. 가재인 경우: 피보험자와 같은 세대에 속하는 사람의 소유물\n",
       "\n",
       "# 제11조(보상하는 손해)\n",
       "## ①\n",
       "회사는 보험의 목적이 화재(벼락을 포함합니다), 폭발 또는 파열(이하「사고」라 합니다)로 입은 아래\n",
       "\n",
       "\n",
       "-----\n",
       "\n",
       "의 손해를 보상하여 드립니다.\n",
       "\n",
       "1. 사고에 따른 직접손해\n",
       "2. 사고에 따른 소방손해(화재진압과정에서 발생하는 손해)\n",
       "3. 사고에 따른 피난손해(피난지에서 5일 동안에 보험의 목적에 생긴 위 제1호 및 제2호의 손해를 포\n",
       "\n",
       "함합니다)\n",
       "\n",
       "## ②\n",
       " 회사는 제1항에서 보장하는 위험으로 인하여 손해가 발생한 경우 계약자 또는 피보험자가 지출한 아\n",
       "\n",
       "래의 비용을 추가로 지급합니다.\n",
       "\n",
       "1. 잔존물 제거비용: 사고현장에서의 잔존물의 해체비용, 청소비용(사고현장 및 인근 지역의 토양, 대\n",
       "\n",
       "기 및 수질 오염물질 제거비용과 차에 실은 후 폐기물 처리비용은 포함되지 아니합니다) 및 차에\n",
       "싣는 비용. 다만, 제1항에서 보장하지 아니하는 위험으로 보험의 목적이 손해를 입거나 관계법령에\n",
       "의하여 제거됨으로써 생긴 손해에 대하여는 보상하여 드리지 아니합니다.\n",
       "\n",
       "2. 손해방지비용: 손해의 방지 또는 경감을 위하여 지출한 필요 또는 유익한 비용\n",
       "3. 대위권 보전비용: 제3자로부터 손해의 배상을 받을 수 있는 경우에는 그 권리를 지키거나 행사하기\n",
       "\n",
       "위하여 지출한 필요 또는 유익한 비용\n",
       "\n",
       "4. 잔존물 보전비용: 잔존물을 보전하기 위하여 지출한 필요 또는 유익한 비용. 다만, 제30조(잔존물)\n",
       "\n",
       "에 의해 회사가 잔존물을 취득한 경우에 한합니다.\n",
       "\n",
       "5. 기타 협력비용: 회사의 요구에 따르기 위하여 지출한 필요 또는 유익한 비용\n",
       "\n",
       "# 제12조(보상하지 아니하는 손해)\n",
       "회사는 아래의 사유로 인한 손해는 보상하여 드리지 아니합니다.\n",
       "\n",
       "1. 계약자, 피보험자(법인인 경우에는 그 이사 또는 법인의 업무를 집행하는 그 밖의 기관) 또는 이들\n",
       "\n",
       "의 법정대리인의 고의 또는 중대한 과실\n",
       "\n",
       "2. 화재, 폭발 또는 파열이 발생했을 때의 분실로 생긴 손해\n",
       "3. 보험의 목적의 발효, 자연발열, 자연발화로 생긴 손해. 그러나, 자연발열 또는 자연발화로 연소된\n",
       "\n",
       "다른 보험의 목적에 생긴 손해는 보상하여 드립니다.\n",
       "\n",
       "4. 화재, 폭발 또는 파열로 인하지 아니한 수도관, 수관, 수압기 등의 파열로 생긴 손해\n",
       "5. 발전기, 여자기(정류기 포함), 변류기, 변압기, 전압조정기, 축전기, 개폐기, 차단기, 피뢰기, 배전반\n",
       "\n",
       "및 그 밖의 전기기기 또는 장치의 전기적 사고로 생긴 손해. 그러나 그 결과로 생긴 화재, 폭발, 파\n",
       "열손해는 보상하여 드립니다.\n",
       "\n",
       "6. 원인의 직접, 간접을 묻지 아니하고 지진, 분화 또는 전쟁, 혁명, 내란, 사변, 폭동, 소요, 노동쟁의,\n",
       "\n",
       "기타 이들과 유사한 사태로 생긴 화재 및 연소 또는 그 밖의 손해\n",
       "\n",
       "7. 핵연료물질 (사용된 연료를 포함합니다. 이하 같습니다) 또는 핵연료 물질에 의하여 오염된 물질\n",
       "\n",
       "(원자핵 분열 생성물을 포함합니다)의 방사성, 폭발성 그 밖의 유해한 특성 또는 이들의 특성에 의\n",
       "한 사고로 인한 손해\n",
       "\n",
       "8. 위 제7호 이외의 방사선을 쬐는 것 또는 방사능 오염으로 인한 손해\n",
       "9. 국가 및 지방자치단체의 명령에 의한 재산의 소각 및 이와 유사한 손해\n",
       "\n",
       "# 제13조(보험금 등의 지급한도)\n",
       "## ①\n",
       " 제11조(보상하는 손해)제1항의 손해에 의한 보험금과 제11조(보상하는 손해)제2항의 잔존물 제거비\n",
       "\n",
       "용은 각각 제23조(지급보험금의 계산)를 준용하여 계산하며, 그 합계액은 보험증권(보험가입증서)에\n",
       "기재된 보험가입금액을 한도로 합니다. 다만, 잔존물 제거비용은 손해액의 10%를 초과할 수 없습니\n",
       "다.\n",
       "\n",
       "## ②\n",
       " 제11조(보상하는 손해)제2항의 비용손해 중 손해방지비용, 대위권 보전비용 및 잔존물 보전비용은\n",
       "\n",
       "제23조(지급보험금의 계산)를 준용하여 계산한 금액이 보험가입금액을 초과하는 경우에도 이를 지급\n",
       "합니다.\n",
       "\n",
       "## ③\n",
       " 제11조(보상하는 손해)제2항의 비용손해 중 기타 협력비용은 보험가입금액을 초과한 경우에도 이를\n",
       "\n",
       "전액 지급합니다.\n",
       "\n",
       "# 제14조(계약전 알릴 의무)\n",
       "계약자, 피보험자 또는 이들의 대리인은 청약시 청약서(질문서를 포함합니다)에서 질문한 사항에 대하\n",
       "여 알고 있는 사실을 반드시 사실대로 알려야 합니다.\n",
       "\n",
       "<용어풀이>\n",
       "\n",
       "\n",
       "-----\n",
       "\n"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from IPython.display import Markdown, display\n",
    "\n",
    "display(Markdown(md_text))"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "d47272a1-4ec7-48eb-83c4-d9b0d37d6bb9",
   "metadata": {},
   "source": [
    "# MarkDown 파일을 목차별로 split합니다."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "103fb670-034f-4c3f-97d5-a5ef669663d0",
   "metadata": {},
   "source": [
    "https://python.langchain.com/docs/how_to/markdown_header_metadata_splitter/"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "id": "200fd73a-e167-4008-90f2-be148e32db0e",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "from langchain_text_splitters import MarkdownHeaderTextSplitter"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "id": "34a74e62-2cf0-4369-b541-6750507b115e",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "headers_to_split_on = [\n",
    "    (\"#\", \"Header 1\"),\n",
    "    (\"##\", \"Header 2\"),\n",
    "    (\"###\", \"Header 3\"),\n",
    "]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "id": "838650ea-0d7a-4bbc-bc68-85d82f61f063",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "markdown_splitter = MarkdownHeaderTextSplitter(headers_to_split_on)\n",
    "md_header_splits = markdown_splitter.split_text(md_text)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "id": "0339b3cc-f2f1-4224-bfb2-5a4a16613775",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[Document(metadata={'Header 1': '제1조(보험계약의 성립)', 'Header 2': '①'}, page_content='보험계약은 보험계약자의 청약과 보험회사의 승낙으로 이루어집니다.(이하 “ 보험계약”은 “ 계약”, “ 보  \\n험계약자” 는 “ 계약자” , “ 보험회사” 는 “ 회사” 라 합니다)'),\n",
       " Document(metadata={'Header 1': '제1조(보험계약의 성립)', 'Header 2': '②'}, page_content='회사는 계약의 청약을 받고 보험료 전액(보험료를 일시에 지급하기로 약정한 경우) 또는 제1회 보험  \\n료(보험료를 분납하기로 약정한 경우)(이하 ‘ 제1회 보험료 등’ 이라 합니다)를 받은 경우에는 청약일\\n부터 30일 이내에 승낙 또는 거절의 통지를 하며 통지가 없으면 승낙한 것으로 봅니다.'),\n",
       " Document(metadata={'Header 1': '제1조(보험계약의 성립)', 'Header 2': '③'}, page_content='회사가 청약을 승낙한 때에는 지체 없이 보험증권(보험가입증서)을 계약자에게 교부하여 드리며, 청  \\n약을 거절한 경우에는 거절통지와 함께 받은 금액을 계약자에게 돌려드립니다.'),\n",
       " Document(metadata={'Header 1': '제1조(보험계약의 성립)', 'Header 2': '④'}, page_content='이미 성립한 계약을 연장하거나 변경하는 경우에는 회사는 보험증권(보험가입증서)에 그 사실을 기  \\n재함으로써 보험증권(보험가입증서)의 교부에 대신할 수 있습니다.'),\n",
       " Document(metadata={'Header 1': '제2조(약관교부 및 설명의무 등)', 'Header 2': '①'}, page_content='회사는 계약자가 청약한 경우 계약자에게 약관 및 계약자 보관용 청약서(청약서 부본)를 드리고 약  \\n관의 중요한 내용을 설명하여 드립니다. 다만, 전화․ 우편․ 컴퓨터 등의 통신매체를 통한 보험계약\\n(이하 “ 통신판매 계약” 이라 합니다)의 경우에는 회사는 계약자의 동의를 얻어 다음 중 한 가지 방\\n법으로 할 수 있습니다.  \\n1. 광기록매체 또는 전자우편 등의 전자적 방법으로 약관이나 계약자 보관용 청약서(청약서 부본)를  \\n송부하는 방법. 이 경우 계약자 또는 그 대리인이 이를 수신한 때에 당해 약관이나 계약자 보관용\\n청약서(청약서 부본)를 드린 것으로 봅니다.  \\n2. 사이버몰(컴퓨터를 이용하여 보험거래를 할 수 있도록 설정된 가상의 영업장)에서 약관 및 그 설명  \\n문(약관의 중요한 내용을 알 수 있도록 설명한 문서)을 읽거나 내려받게 하는 방법. 이 경우 계약\\n자가 이를 읽거나 내려받은 것을 확인한 때에 당해 약관을 드리고 그 중요한 내용을 설명한 것으\\n로 봅니다.  \\n3. 전화를 이용하여 청약내용, 보험료납입, 보험기간, 계약전 알릴의무, 약관의 중요한 내용 등 계약  \\n체결을 위하여 필요한 사항을 질문 또는 설명하는 방법. 이 경우 계약자의 답변과 확인내용을 음성\\n녹음함으로써 약관의 중요한 내용을 설명한 것으로 봅니다.'),\n",
       " Document(metadata={'Header 1': '제2조(약관교부 및 설명의무 등)', 'Header 2': '②'}, page_content='회사가 제1항에 의해 제공될 약관 및 계약자 보관용 청약서(청약서 부본)를 청약 시 계약자에게 드  \\n리지 아니하거나 약관의 중요한 내용을 설명하지 아니한 때 또는 계약을 체결할 때 계약자가 청약서\\n에 자필서명[날인(도장을 찍음) 또는 전자서명법 제2조 제10호의 규정에 의한 공인인증기관이 인증\\n한 전자서명을 포함합니다)]을 하지 아니한 때에는 계약자는 계약체결일부터 1개월 이내에 계약을\\n취소할 수 있습니다.'),\n",
       " Document(metadata={'Header 1': '제2조(약관교부 및 설명의무 등)', 'Header 2': '③'}, page_content='제2항에 따라 계약이 취소된 경우에는 회사는 이미 납입한 보험료를 계약자에게 돌려드리며, 보험료  \\n를 받은 기간에 대하여 보험개발원이 공시하는 정기예금이율을 연단위 복리로 계산한 금액을 더하여\\n지급합니다.'),\n",
       " Document(metadata={'Header 1': '제3조(제1회 보험료 등 및 회사의 보장개시)', 'Header 2': '①'}, page_content='회사는 계약의 청약을 승낙하고 제1회 보험료 등을 받은 때부터 이 약관이 정한 바에 따라 보장을  \\n합니다.'),\n",
       " Document(metadata={'Header 1': '제3조(제1회 보험료 등 및 회사의 보장개시)', 'Header 2': '②'}, page_content='회사가 계약자로부터 계약의 청약과 함께 제1회 보험료 등을 받은 경우에 그 청약을 승낙하기 전에  \\n계약에서 정한 보험금 지급사유가 생긴 때에는 회사는 계약상의 보장을 합니다.'),\n",
       " Document(metadata={'Header 1': '제3조(제1회 보험료 등 및 회사의 보장개시)', 'Header 2': '③'}, page_content='제2항의 규정에도 불구하고 회사는 다음 중 한 가지에 해당되는 경우에는 보장을 하지 아니합니다.  \\n1. 제14조(계약전 알릴 의무)의 규정에 의하여 계약자 또는 피보험자가 회사에 알린 내용이 보험금  \\n지급사유의 발생에 영향을 미쳤음을 회사가 증명하는 경우  \\n2. 제12조(보상하지 아니하는 손해), 제16조(계약의 해지), 제18조(계약의 무효) 또는 제27조(사기에  \\n의한 계약)의 규정을 준용하여 회사가 보장을 하지 아니할 수 있는 경우'),\n",
       " Document(metadata={'Header 1': '제3조(제1회 보험료 등 및 회사의 보장개시)', 'Header 2': '④'}, page_content='계약자가 제1회 보험료 등을 자동이체 또는 신용카드로 납입하는 경우에는 자동이체신청 및 신용카  \\n드매출 승인에 필요한 정보를 회사에 제공한 때가 제1회 보험료 등을 납입한 때가 되나, 계약자의\\n귀책사유로 자동이체 또는 매출승인이 불가능한 경우에는 제1회 보험료 등이 납입되지 않은 것으로\\n봅니다.  \\n-----'),\n",
       " Document(metadata={'Header 1': '제3조(제1회 보험료 등 및 회사의 보장개시)', 'Header 2': '⑤'}, page_content='계약이 갱신되는 경우에는 제1항 내지 제3항에 의한 보장은 기존 계약에 의한 보장이 종료하는 때부  \\n터 적용합니다.'),\n",
       " Document(metadata={'Header 1': '제4조(제2회 이후 보험료의 납입)'}, page_content='계약자는 제2회 이후의 보험료를 계약 체결시 납입하기로 약속한 날(이하납입기일이라 합니다)까\\n지 납입하여야 하며, 회사는 계약자가 보험료를 납입한 경우에는 영수증을 발행하여 드립니다. 다만, 금\\n융회사(우체국을 포함합니다)룰 통하여 보험료를 납입한 경우에는 그 금융회사 발행 증빙서류를 영수증\\n으로 대신합니다.'),\n",
       " Document(metadata={'Header 1': '제5조(청약의 철회)', 'Header 2': '①'}, page_content='가계성 보험[개인의 일상생활과 관련된 보험으로 보험료를 단체 또는 법인이 부담하지 않는 개인보  \\n험계약과 단체요율(피보험자가 단체인 계약에 적용되는 요율)이 적용되지 않는 계약을 말합니다]에\\n한하여 계약자는 청약을 한 날부터 15일 이내에 그 청약을 철회할 수 있습니다. 다만, 단체(취급)계\\n약 또는 보험기간이 1년 미만인 계약의 경우에는 청약을 철회할 수 없으며, 통신판매 계약(보험기간\\n이 1년 이상인 계약에 한함)의 경우에는 청약을 한 날부터 30일 이내에 그 청약을 철회할 수 있습니\\n다.'),\n",
       " Document(metadata={'Header 1': '제5조(청약의 철회)', 'Header 2': '②'}, page_content='회사는 청약의 철회를 접수한 경우에는 3일 이내에 이미 납입한 보험료를 계약자에게 돌려 드리며,  \\n보험료 반환이 지체된 기간에 대하여는 보험개발원이 공시하는 정기예금이율을 연단위 복리로 계산\\n한 금액을 더하여 지급합니다. 다만, 계약자가 제1회 보험료 등을 신용카드로 납입한 계약의 청약을\\n철회하는 경우에 회사는 신용카드의 매출을 취소하며 이자를 더하여 지급하지 아니합니다.'),\n",
       " Document(metadata={'Header 1': '제5조(청약의 철회)', 'Header 2': '③'}, page_content='청약을 철회할 당시에 이미 보험금 지급사유가 발생하였으나 계약자가 그 보험금 지급사유의 발생사  \\n실을 알지 못한 경우에는 청약철회의 효력은 발생하지 않습니다.'),\n",
       " Document(metadata={'Header 1': '제6조(계약내용의 변경 등)', 'Header 2': '①'}, page_content='계약자는 회사의 승낙을 얻어 다음의 사항을 변경할 수 있습니다. 이 경우 승낙을 서면 등으로 알리  \\n거나 보험증권(보험가입증서)의 뒷면에 기재하여 드립니다.  \\n1. 보험종목\\n2. 보험기간\\n3. 보험료 납입주기, 수금방법 및 납입기간\\n4. 계약자, 피보험자, 보험가입금액 등 기타 계약의 내용'),\n",
       " Document(metadata={'Header 1': '제6조(계약내용의 변경 등)', 'Header 2': '②'}, page_content='회사는 계약자가 제1회 보험료 등을 납입한 때부터 1년 이상 경과된 유효한 계약으로서 그 보험종목  \\n의 변경을 요청할 때에는 회사의 사업방법서에서 정하는 방법에 따라 이를 변경하여 드립니다.'),\n",
       " Document(metadata={'Header 1': '제6조(계약내용의 변경 등)', 'Header 2': '③'}, page_content='회사는 계약자가 제1항 제4호의 규정에 의하여 보험가입금액을 감액하고자 할 때에는 그 감액된 부  \\n분은 계약이 해지된 것으로 보며, 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는 19조\\n(보험료의 환급)에 따라 이를 계약자에게 지급합니다.'),\n",
       " Document(metadata={'Header 1': '제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]', 'Header 2': '①'}, page_content='계약자가 제2회 이후의 보험료를 납입기일까지 납입하지 아니하여 보험료 납입이 연체 중인 경우에  \\n는, 회사는 14일(보험기간이 1년 미만인 경우에는 7일) 이상의 기간을 납입최고(독촉)기간으로 정하\\n여 계약자(타인을 위한 계약의 경우 그 특정된 타인을 포함합니다)에게 다음의 내용을 서면(등기우편\\n등), 전화(음성녹음) 또는 전자문서 등으로 알려드립니다. 다만, 계약이 해지되기 전에 발생한 보험금\\n지급사유에 대하여 회사는 계약상의 보장을 합니다.  \\n1. 납입최고(독촉)기간 안에 연체보험료를 납입하여야 한다는 내용\\n2. 납입최고(독촉)기간이 끝나는 날까지 보험료를 납입하지 아니할 경우 그 끝나는 날의 다음날에 계  \\n약이 해지된다는 내용  \\n3. 계약자가 회사로부터 보험계약대출을 받은 경우에는, 계약이 해지되는 즉시 해지환급금에서 보험계  \\n약대출 원리금이 차감된다는 내용'),\n",
       " Document(metadata={'Header 1': '제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]', 'Header 2': '②'}, page_content='제1항의 납입최고(독촉)기간은 납입최고(독촉)의 통지가 계약자(타인을 위한 계약의 경우에는 그 특  \\n정된 타인을 포함)에게 도달한 날부터 시작되며, 그 기간의 말일(말일이 토요일 또는 공휴일인 경우\\n에는 그 다음의 최초의 평일)에 끝납니다.'),\n",
       " Document(metadata={'Header 1': '제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]', 'Header 2': '③'}, page_content='회사가 제1항에 의한 납입최고(독촉) 등을 전자문서로 안내하고자 할 경우에는 계약자의 서면에 의  \\n한 동의를 얻어 수신확인을 조건으로 전자문서를 송신하여야 하며, 계약자가 전자문서에 대하여 수\\n신을 확인하기 전까지는 그 전자문서는 송신되지 아니한 것으로 봅니다. 회사는 전자문서가 수신되  \\n-----  \\n지 아니한 것으로 확인되는 경우에는 제1항의 납입최고(독촉)기간을 설정하여 제1항에서 정한 내용\\n을 서면(등기우편 등) 또는 전화(음성녹음)로 다시 알려 드립니다.'),\n",
       " Document(metadata={'Header 1': '제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]', 'Header 2': '④'}, page_content='제1항에 따라 계약이 해지된 경우에는 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는  \\n제19조(보험료의 환급)에 따라 이를 계약자에게 지급합니다.'),\n",
       " Document(metadata={'Header 1': '제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]', 'Header 2': '①'}, page_content='제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]에 따라 계약이 해지되었으나 계약자가  \\n제19조(보험료의 환급)에 따른 환급금을 받지 아니한 경우 계약자는 해지된 날부터 2년 이내에 회사\\n가 정한 절차에 따라 계약의 부활(효력회복)을 청약할 수 있습니다. 이 경우 회사가 그 청약을 승낙\\n한 때에는 계약자는 부활(효력회복)을 청약한 날까지의 연체된 보험료에 보험개발원이 공시하는 정\\n기예금이율 + 1% 범위내에서 각 상품별로 회사가 정하는 이율로 계산한 금액을 더하여 납입하여야\\n합니다.'),\n",
       " Document(metadata={'Header 1': '제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]', 'Header 2': '②'}, page_content='제1항에 따라 해지계약을 부활(효력회복)하는 경우에는 제1조(보험계약의 성립), 제3조(제1회 보험료  \\n등 및 회사의 보장개시), 제14조(계약 전 알릴의무) 및 제16조(계약의 해지)의 규정을 준용합니다.'),\n",
       " Document(metadata={'Header 1': '제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]', 'Header 2': '①'}, page_content='타인을 위한 계약의 경우 제19조(보험료의 환급)에 따른 계약자의 해지환급금 청구권에 대한 강제집  \\n행, 담보권실행, 국세 및 지방세 체납처분절차에 의해 계약이 해지된 경우에는, 회사는 해지 당시의\\n피보험자가 계약자의 동의를 얻어 계약 해지로 회사가 채권자에게 지급한 금액을 회사에게 지급하고\\n제6조(계약내용의 변경 등) 제1항의 절차에 따라 계약자 명의를 피보험자로 변경하여 계약의 특별부\\n활(효력회복)을 청약할 수 있음을 피보험자에게 통지하여야 합니다.'),\n",
       " Document(metadata={'Header 1': '제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]', 'Header 2': '②'}, page_content='회사는 제1항에 의한 계약자 명의변경 신청 및 계약의 특별부활(효력회복) 청약을 승낙하며, 계약은  \\n청약한 때부터 특별부활(효력회복) 됩니다.'),\n",
       " Document(metadata={'Header 1': '제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]', 'Header 2': '③'}, page_content='회사는 제1항의 통지를 계약이 해지된 날부터 7일 이내에 하여야 합니다. 다만, 회사의 통지가 7일  \\n을 경과하여 도달하고 이후 피보험자가 제1항에 의한 계약자 명의변경 신청 및 계약의 특별부활(효\\n력회복)을 청약한 경우에는 계약이 해지된 날부터 7일이 되는 날에 특별부활(효력회복) 됩니다.'),\n",
       " Document(metadata={'Header 1': '제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]', 'Header 2': '④'}, page_content='피보험자는 통지를 받은 날부터 15일 이내에 제1항의 절차를 이행할 수 있습니다.'),\n",
       " Document(metadata={'Header 1': '제10조(보험목적의 범위)', 'Header 2': '①'}, page_content='이 약관에서 보험의 목적이라 함은 이 약관에 따라 보험에 가입한 물건으로서 보험증권(보험가입증  \\n서)에 기재된 건물 등을 말합니다.  \\n1. 주택으로만 쓰이는 건물 중 다음의 것 또는 그 수용가재  \\n(ⅰ) 단독주택\\n(ⅱ) 주택의 부속건물로서 가재만을 수용하는데 쓰이는 것\\n(ⅲ) 연립(다세대)주택, 아파트로서 각 호(戶), 실(室)이 모두 주택으로만 쓰이는 것  \\n2. 주택병용 물건으로서 아래의 용도로 사용하는 건물 및 그 수용가재  \\n(ⅰ) 교습소(피아노, 꽃꽂이, 국악, 재봉 및 이와 비슷한 것)\\n(ⅱ) 치료(안수, 침구(침질,뜸질), 정골, 조산원 및 이와 비슷한 것)'),\n",
       " Document(metadata={'Header 1': '제10조(보험목적의 범위)', 'Header 2': '②'}, page_content='아래의 물건은 보험증권(보험가입증서)에 기재하여야만 보험의 목적이 됩니다.  \\n1. 통화, 유가증권, 인지, 우표 및 이와 비슷한 것\\n2. 귀금속, 귀중품(무게나 부피가 휴대할 수 있으며 점당 300만원 이상), 보옥, 보석, 글․ 그림, 골동품,  \\n조각물 및 이와 비슷한 것  \\n3. 원고, 설계서, 도안, 물건의 원본, 모형, 증서, 장부, 금형(쇠틀), 목형(나무틀), 소프트웨어 및 이와  \\n비슷한 것'),\n",
       " Document(metadata={'Header 1': '제10조(보험목적의 범위)', 'Header 2': '③'}, page_content='아래의 물건은 다른 약정이 없으면 보험의 목적에 포함됩니다.  \\n1. 건물인 경우\\n(ⅰ)건물의 부속물: 피보험자의 소유인 칸막이, 대문, 담, 곳간 및 이와 비슷한 것\\n(ⅱ)건물의 부착물: 피보험자 소유인 간판, 네온사인, 안테나, 선전탑 및 이와 비슷한 것\\n2. 가재인 경우: 피보험자와 같은 세대에 속하는 사람의 소유물'),\n",
       " Document(metadata={'Header 1': '제11조(보상하는 손해)', 'Header 2': '①'}, page_content='회사는 보험의 목적이 화재(벼락을 포함합니다), 폭발 또는 파열(이하「사고」라 합니다)로 입은 아래  \\n-----  \\n의 손해를 보상하여 드립니다.  \\n1. 사고에 따른 직접손해\\n2. 사고에 따른 소방손해(화재진압과정에서 발생하는 손해)\\n3. 사고에 따른 피난손해(피난지에서 5일 동안에 보험의 목적에 생긴 위 제1호 및 제2호의 손해를 포  \\n함합니다)'),\n",
       " Document(metadata={'Header 1': '제11조(보상하는 손해)', 'Header 2': '②'}, page_content='회사는 제1항에서 보장하는 위험으로 인하여 손해가 발생한 경우 계약자 또는 피보험자가 지출한 아  \\n래의 비용을 추가로 지급합니다.  \\n1. 잔존물 제거비용: 사고현장에서의 잔존물의 해체비용, 청소비용(사고현장 및 인근 지역의 토양, 대  \\n기 및 수질 오염물질 제거비용과 차에 실은 후 폐기물 처리비용은 포함되지 아니합니다) 및 차에\\n싣는 비용. 다만, 제1항에서 보장하지 아니하는 위험으로 보험의 목적이 손해를 입거나 관계법령에\\n의하여 제거됨으로써 생긴 손해에 대하여는 보상하여 드리지 아니합니다.  \\n2. 손해방지비용: 손해의 방지 또는 경감을 위하여 지출한 필요 또는 유익한 비용\\n3. 대위권 보전비용: 제3자로부터 손해의 배상을 받을 수 있는 경우에는 그 권리를 지키거나 행사하기  \\n위하여 지출한 필요 또는 유익한 비용  \\n4. 잔존물 보전비용: 잔존물을 보전하기 위하여 지출한 필요 또는 유익한 비용. 다만, 제30조(잔존물)  \\n에 의해 회사가 잔존물을 취득한 경우에 한합니다.  \\n5. 기타 협력비용: 회사의 요구에 따르기 위하여 지출한 필요 또는 유익한 비용'),\n",
       " Document(metadata={'Header 1': '제12조(보상하지 아니하는 손해)'}, page_content='회사는 아래의 사유로 인한 손해는 보상하여 드리지 아니합니다.  \\n1. 계약자, 피보험자(법인인 경우에는 그 이사 또는 법인의 업무를 집행하는 그 밖의 기관) 또는 이들  \\n의 법정대리인의 고의 또는 중대한 과실  \\n2. 화재, 폭발 또는 파열이 발생했을 때의 분실로 생긴 손해\\n3. 보험의 목적의 발효, 자연발열, 자연발화로 생긴 손해. 그러나, 자연발열 또는 자연발화로 연소된  \\n다른 보험의 목적에 생긴 손해는 보상하여 드립니다.  \\n4. 화재, 폭발 또는 파열로 인하지 아니한 수도관, 수관, 수압기 등의 파열로 생긴 손해\\n5. 발전기, 여자기(정류기 포함), 변류기, 변압기, 전압조정기, 축전기, 개폐기, 차단기, 피뢰기, 배전반  \\n및 그 밖의 전기기기 또는 장치의 전기적 사고로 생긴 손해. 그러나 그 결과로 생긴 화재, 폭발, 파\\n열손해는 보상하여 드립니다.  \\n6. 원인의 직접, 간접을 묻지 아니하고 지진, 분화 또는 전쟁, 혁명, 내란, 사변, 폭동, 소요, 노동쟁의,  \\n기타 이들과 유사한 사태로 생긴 화재 및 연소 또는 그 밖의 손해  \\n7. 핵연료물질 (사용된 연료를 포함합니다. 이하 같습니다) 또는 핵연료 물질에 의하여 오염된 물질  \\n(원자핵 분열 생성물을 포함합니다)의 방사성, 폭발성 그 밖의 유해한 특성 또는 이들의 특성에 의\\n한 사고로 인한 손해  \\n8. 위 제7호 이외의 방사선을 쬐는 것 또는 방사능 오염으로 인한 손해\\n9. 국가 및 지방자치단체의 명령에 의한 재산의 소각 및 이와 유사한 손해'),\n",
       " Document(metadata={'Header 1': '제13조(보험금 등의 지급한도)', 'Header 2': '①'}, page_content='제11조(보상하는 손해)제1항의 손해에 의한 보험금과 제11조(보상하는 손해)제2항의 잔존물 제거비  \\n용은 각각 제23조(지급보험금의 계산)를 준용하여 계산하며, 그 합계액은 보험증권(보험가입증서)에\\n기재된 보험가입금액을 한도로 합니다. 다만, 잔존물 제거비용은 손해액의 10%를 초과할 수 없습니\\n다.'),\n",
       " Document(metadata={'Header 1': '제13조(보험금 등의 지급한도)', 'Header 2': '②'}, page_content='제11조(보상하는 손해)제2항의 비용손해 중 손해방지비용, 대위권 보전비용 및 잔존물 보전비용은  \\n제23조(지급보험금의 계산)를 준용하여 계산한 금액이 보험가입금액을 초과하는 경우에도 이를 지급\\n합니다.'),\n",
       " Document(metadata={'Header 1': '제13조(보험금 등의 지급한도)', 'Header 2': '③'}, page_content='제11조(보상하는 손해)제2항의 비용손해 중 기타 협력비용은 보험가입금액을 초과한 경우에도 이를  \\n전액 지급합니다.'),\n",
       " Document(metadata={'Header 1': '제14조(계약전 알릴 의무)'}, page_content='계약자, 피보험자 또는 이들의 대리인은 청약시 청약서(질문서를 포함합니다)에서 질문한 사항에 대하\\n여 알고 있는 사실을 반드시 사실대로 알려야 합니다.  \\n<용어풀이>  \\n-----')]"
      ]
     },
     "execution_count": 19,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "md_header_splits"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "6ca30ab8-49da-4819-903d-357ec3f367d0",
   "metadata": {},
   "source": [
    "### 몇개의 docuement로 split되었는지 출력해 봅니다."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "id": "5d41e58b-ae91-48c4-b321-04113b801461",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[Header Doc Index] 0 ------------------------\n",
      "  Header 1:  제1조(보험계약의 성립)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 보험계약은 보험계약자의 청약과 보험회사의 승낙으로 이루어집니다.(이하 “ 보험계약”은 “ 계약”, “ 보  \n",
      "험계약자” 는 “ 계약자” , “ 보험회사” 는 “ 회사” 라 합니다)\n",
      "\n",
      "\n",
      "[Header Doc Index] 1 ------------------------\n",
      "  Header 1:  제1조(보험계약의 성립)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 회사는 계약의 청약을 받고 보험료 전액(보험료를 일시에 지급하기로 약정한 경우) 또는 제1회 보험  \n",
      "료(보험료를 분납하기로 약정한 경우)(이하 ‘ 제1회 보험료 등’ 이라 합니다)를 받은 경우에는 청약일\n",
      "부터 30일 이내에 승낙 또는 거절의 통지를 하며 통지가 없으면 승낙한 것으로 봅니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 2 ------------------------\n",
      "  Header 1:  제1조(보험계약의 성립)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 회사가 청약을 승낙한 때에는 지체 없이 보험증권(보험가입증서)을 계약자에게 교부하여 드리며, 청  \n",
      "약을 거절한 경우에는 거절통지와 함께 받은 금액을 계약자에게 돌려드립니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 3 ------------------------\n",
      "  Header 1:  제1조(보험계약의 성립)\n",
      "    Header 2:  ④\n",
      "      [Doc page_content]: 이미 성립한 계약을 연장하거나 변경하는 경우에는 회사는 보험증권(보험가입증서)에 그 사실을 기  \n",
      "재함으로써 보험증권(보험가입증서)의 교부에 대신할 수 있습니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 4 ------------------------\n",
      "  Header 1:  제2조(약관교부 및 설명의무 등)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 회사는 계약자가 청약한 경우 계약자에게 약관 및 계약자 보관용 청약서(청약서 부본)를 드리고 약  \n",
      "관의 중요한 내용을 설명하여 드립니다. 다만, 전화․ 우편․ 컴퓨터 등의 통신매체를 통한 보험계약\n",
      "(이하 “ 통신판매 계약” 이라 합니다)의 경우에는 회사는 계약자의 동의를 얻어 다음 중 한 가지 방\n",
      "법으로 할 수 있습니다.  \n",
      "1. 광기록매체 또는 전자우편 등의 전자적 방법으로 약관이나 계약자 보관용 청약서(청약서 부본)를  \n",
      "송부하는 방법. 이 경우 계약자 또는 그 대리인이 이를 수신한 때에 당해 약관이나 계약자 보관용\n",
      "청약서(청약서 부본)를 드린 것으로 봅니다.  \n",
      "2. 사이버몰(컴퓨터를 이용하여 보험거래를 할 수 있도록 설정된 가상의 영업장)에서 약관 및 그 설명  \n",
      "문(약관의 중요한 내용을 알 수 있도록 설명한 문서)을 읽거나 내려받게 하는 방법. 이 경우 계약\n",
      "자가 이를 읽거나 내려받은 것을 확인한 때에 당해 약관을 드리고 그 중요한 내용을 설명한 것으\n",
      "로 봅니다.  \n",
      "3. 전화를 이용하여 청약내용, 보험료납입, 보험기간, 계약전 알릴의무, 약관의 중요한 내용 등 계약  \n",
      "체결을 위하여 필요한 사항을 질문 또는 설명하는 방법. 이 경우 계약자의 답변과 확인내용을 음성\n",
      "녹음함으로써 약관의 중요한 내용을 설명한 것으로 봅니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 5 ------------------------\n",
      "  Header 1:  제2조(약관교부 및 설명의무 등)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 회사가 제1항에 의해 제공될 약관 및 계약자 보관용 청약서(청약서 부본)를 청약 시 계약자에게 드  \n",
      "리지 아니하거나 약관의 중요한 내용을 설명하지 아니한 때 또는 계약을 체결할 때 계약자가 청약서\n",
      "에 자필서명[날인(도장을 찍음) 또는 전자서명법 제2조 제10호의 규정에 의한 공인인증기관이 인증\n",
      "한 전자서명을 포함합니다)]을 하지 아니한 때에는 계약자는 계약체결일부터 1개월 이내에 계약을\n",
      "취소할 수 있습니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 6 ------------------------\n",
      "  Header 1:  제2조(약관교부 및 설명의무 등)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 제2항에 따라 계약이 취소된 경우에는 회사는 이미 납입한 보험료를 계약자에게 돌려드리며, 보험료  \n",
      "를 받은 기간에 대하여 보험개발원이 공시하는 정기예금이율을 연단위 복리로 계산한 금액을 더하여\n",
      "지급합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 7 ------------------------\n",
      "  Header 1:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 회사는 계약의 청약을 승낙하고 제1회 보험료 등을 받은 때부터 이 약관이 정한 바에 따라 보장을  \n",
      "합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 8 ------------------------\n",
      "  Header 1:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 회사가 계약자로부터 계약의 청약과 함께 제1회 보험료 등을 받은 경우에 그 청약을 승낙하기 전에  \n",
      "계약에서 정한 보험금 지급사유가 생긴 때에는 회사는 계약상의 보장을 합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 9 ------------------------\n",
      "  Header 1:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 제2항의 규정에도 불구하고 회사는 다음 중 한 가지에 해당되는 경우에는 보장을 하지 아니합니다.  \n",
      "1. 제14조(계약전 알릴 의무)의 규정에 의하여 계약자 또는 피보험자가 회사에 알린 내용이 보험금  \n",
      "지급사유의 발생에 영향을 미쳤음을 회사가 증명하는 경우  \n",
      "2. 제12조(보상하지 아니하는 손해), 제16조(계약의 해지), 제18조(계약의 무효) 또는 제27조(사기에  \n",
      "의한 계약)의 규정을 준용하여 회사가 보장을 하지 아니할 수 있는 경우\n",
      "\n",
      "\n",
      "[Header Doc Index] 10 ------------------------\n",
      "  Header 1:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "    Header 2:  ④\n",
      "      [Doc page_content]: 계약자가 제1회 보험료 등을 자동이체 또는 신용카드로 납입하는 경우에는 자동이체신청 및 신용카  \n",
      "드매출 승인에 필요한 정보를 회사에 제공한 때가 제1회 보험료 등을 납입한 때가 되나, 계약자의\n",
      "귀책사유로 자동이체 또는 매출승인이 불가능한 경우에는 제1회 보험료 등이 납입되지 않은 것으로\n",
      "봅니다.  \n",
      "-----\n",
      "\n",
      "\n",
      "[Header Doc Index] 11 ------------------------\n",
      "  Header 1:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "    Header 2:  ⑤\n",
      "      [Doc page_content]: 계약이 갱신되는 경우에는 제1항 내지 제3항에 의한 보장은 기존 계약에 의한 보장이 종료하는 때부  \n",
      "터 적용합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 12 ------------------------\n",
      "  Header 1:  제4조(제2회 이후 보험료의 납입)\n",
      "      [Doc page_content]: 계약자는 제2회 이후의 보험료를 계약 체결시 납입하기로 약속한 날(이하납입기일이라 합니다)까\n",
      "지 납입하여야 하며, 회사는 계약자가 보험료를 납입한 경우에는 영수증을 발행하여 드립니다. 다만, 금\n",
      "융회사(우체국을 포함합니다)룰 통하여 보험료를 납입한 경우에는 그 금융회사 발행 증빙서류를 영수증\n",
      "으로 대신합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 13 ------------------------\n",
      "  Header 1:  제5조(청약의 철회)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 가계성 보험[개인의 일상생활과 관련된 보험으로 보험료를 단체 또는 법인이 부담하지 않는 개인보  \n",
      "험계약과 단체요율(피보험자가 단체인 계약에 적용되는 요율)이 적용되지 않는 계약을 말합니다]에\n",
      "한하여 계약자는 청약을 한 날부터 15일 이내에 그 청약을 철회할 수 있습니다. 다만, 단체(취급)계\n",
      "약 또는 보험기간이 1년 미만인 계약의 경우에는 청약을 철회할 수 없으며, 통신판매 계약(보험기간\n",
      "이 1년 이상인 계약에 한함)의 경우에는 청약을 한 날부터 30일 이내에 그 청약을 철회할 수 있습니\n",
      "다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 14 ------------------------\n",
      "  Header 1:  제5조(청약의 철회)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 회사는 청약의 철회를 접수한 경우에는 3일 이내에 이미 납입한 보험료를 계약자에게 돌려 드리며,  \n",
      "보험료 반환이 지체된 기간에 대하여는 보험개발원이 공시하는 정기예금이율을 연단위 복리로 계산\n",
      "한 금액을 더하여 지급합니다. 다만, 계약자가 제1회 보험료 등을 신용카드로 납입한 계약의 청약을\n",
      "철회하는 경우에 회사는 신용카드의 매출을 취소하며 이자를 더하여 지급하지 아니합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 15 ------------------------\n",
      "  Header 1:  제5조(청약의 철회)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 청약을 철회할 당시에 이미 보험금 지급사유가 발생하였으나 계약자가 그 보험금 지급사유의 발생사  \n",
      "실을 알지 못한 경우에는 청약철회의 효력은 발생하지 않습니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 16 ------------------------\n",
      "  Header 1:  제6조(계약내용의 변경 등)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 계약자는 회사의 승낙을 얻어 다음의 사항을 변경할 수 있습니다. 이 경우 승낙을 서면 등으로 알리  \n",
      "거나 보험증권(보험가입증서)의 뒷면에 기재하여 드립니다.  \n",
      "1. 보험종목\n",
      "2. 보험기간\n",
      "3. 보험료 납입주기, 수금방법 및 납입기간\n",
      "4. 계약자, 피보험자, 보험가입금액 등 기타 계약의 내용\n",
      "\n",
      "\n",
      "[Header Doc Index] 17 ------------------------\n",
      "  Header 1:  제6조(계약내용의 변경 등)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 회사는 계약자가 제1회 보험료 등을 납입한 때부터 1년 이상 경과된 유효한 계약으로서 그 보험종목  \n",
      "의 변경을 요청할 때에는 회사의 사업방법서에서 정하는 방법에 따라 이를 변경하여 드립니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 18 ------------------------\n",
      "  Header 1:  제6조(계약내용의 변경 등)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 회사는 계약자가 제1항 제4호의 규정에 의하여 보험가입금액을 감액하고자 할 때에는 그 감액된 부  \n",
      "분은 계약이 해지된 것으로 보며, 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는 19조\n",
      "(보험료의 환급)에 따라 이를 계약자에게 지급합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 19 ------------------------\n",
      "  Header 1:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 계약자가 제2회 이후의 보험료를 납입기일까지 납입하지 아니하여 보험료 납입이 연체 중인 경우에  \n",
      "는, 회사는 14일(보험기간이 1년 미만인 경우에는 7일) 이상의 기간을 납입최고(독촉)기간으로 정하\n",
      "여 계약자(타인을 위한 계약의 경우 그 특정된 타인을 포함합니다)에게 다음의 내용을 서면(등기우편\n",
      "등), 전화(음성녹음) 또는 전자문서 등으로 알려드립니다. 다만, 계약이 해지되기 전에 발생한 보험금\n",
      "지급사유에 대하여 회사는 계약상의 보장을 합니다.  \n",
      "1. 납입최고(독촉)기간 안에 연체보험료를 납입하여야 한다는 내용\n",
      "2. 납입최고(독촉)기간이 끝나는 날까지 보험료를 납입하지 아니할 경우 그 끝나는 날의 다음날에 계  \n",
      "약이 해지된다는 내용  \n",
      "3. 계약자가 회사로부터 보험계약대출을 받은 경우에는, 계약이 해지되는 즉시 해지환급금에서 보험계  \n",
      "약대출 원리금이 차감된다는 내용\n",
      "\n",
      "\n",
      "[Header Doc Index] 20 ------------------------\n",
      "  Header 1:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 제1항의 납입최고(독촉)기간은 납입최고(독촉)의 통지가 계약자(타인을 위한 계약의 경우에는 그 특  \n",
      "정된 타인을 포함)에게 도달한 날부터 시작되며, 그 기간의 말일(말일이 토요일 또는 공휴일인 경우\n",
      "에는 그 다음의 최초의 평일)에 끝납니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 21 ------------------------\n",
      "  Header 1:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 회사가 제1항에 의한 납입최고(독촉) 등을 전자문서로 안내하고자 할 경우에는 계약자의 서면에 의  \n",
      "한 동의를 얻어 수신확인을 조건으로 전자문서를 송신하여야 하며, 계약자가 전자문서에 대하여 수\n",
      "신을 확인하기 전까지는 그 전자문서는 송신되지 아니한 것으로 봅니다. 회사는 전자문서가 수신되  \n",
      "-----  \n",
      "지 아니한 것으로 확인되는 경우에는 제1항의 납입최고(독촉)기간을 설정하여 제1항에서 정한 내용\n",
      "을 서면(등기우편 등) 또는 전화(음성녹음)로 다시 알려 드립니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 22 ------------------------\n",
      "  Header 1:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
      "    Header 2:  ④\n",
      "      [Doc page_content]: 제1항에 따라 계약이 해지된 경우에는 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는  \n",
      "제19조(보험료의 환급)에 따라 이를 계약자에게 지급합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 23 ------------------------\n",
      "  Header 1:  제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]에 따라 계약이 해지되었으나 계약자가  \n",
      "제19조(보험료의 환급)에 따른 환급금을 받지 아니한 경우 계약자는 해지된 날부터 2년 이내에 회사\n",
      "가 정한 절차에 따라 계약의 부활(효력회복)을 청약할 수 있습니다. 이 경우 회사가 그 청약을 승낙\n",
      "한 때에는 계약자는 부활(효력회복)을 청약한 날까지의 연체된 보험료에 보험개발원이 공시하는 정\n",
      "기예금이율 + 1% 범위내에서 각 상품별로 회사가 정하는 이율로 계산한 금액을 더하여 납입하여야\n",
      "합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 24 ------------------------\n",
      "  Header 1:  제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 제1항에 따라 해지계약을 부활(효력회복)하는 경우에는 제1조(보험계약의 성립), 제3조(제1회 보험료  \n",
      "등 및 회사의 보장개시), 제14조(계약 전 알릴의무) 및 제16조(계약의 해지)의 규정을 준용합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 25 ------------------------\n",
      "  Header 1:  제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 타인을 위한 계약의 경우 제19조(보험료의 환급)에 따른 계약자의 해지환급금 청구권에 대한 강제집  \n",
      "행, 담보권실행, 국세 및 지방세 체납처분절차에 의해 계약이 해지된 경우에는, 회사는 해지 당시의\n",
      "피보험자가 계약자의 동의를 얻어 계약 해지로 회사가 채권자에게 지급한 금액을 회사에게 지급하고\n",
      "제6조(계약내용의 변경 등) 제1항의 절차에 따라 계약자 명의를 피보험자로 변경하여 계약의 특별부\n",
      "활(효력회복)을 청약할 수 있음을 피보험자에게 통지하여야 합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 26 ------------------------\n",
      "  Header 1:  제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 회사는 제1항에 의한 계약자 명의변경 신청 및 계약의 특별부활(효력회복) 청약을 승낙하며, 계약은  \n",
      "청약한 때부터 특별부활(효력회복) 됩니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 27 ------------------------\n",
      "  Header 1:  제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 회사는 제1항의 통지를 계약이 해지된 날부터 7일 이내에 하여야 합니다. 다만, 회사의 통지가 7일  \n",
      "을 경과하여 도달하고 이후 피보험자가 제1항에 의한 계약자 명의변경 신청 및 계약의 특별부활(효\n",
      "력회복)을 청약한 경우에는 계약이 해지된 날부터 7일이 되는 날에 특별부활(효력회복) 됩니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 28 ------------------------\n",
      "  Header 1:  제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\n",
      "    Header 2:  ④\n",
      "      [Doc page_content]: 피보험자는 통지를 받은 날부터 15일 이내에 제1항의 절차를 이행할 수 있습니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 29 ------------------------\n",
      "  Header 1:  제10조(보험목적의 범위)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 약관에서 보험의 목적이라 함은 이 약관에 따라 보험에 가입한 물건으로서 보험증권(보험가입증  \n",
      "서)에 기재된 건물 등을 말합니다.  \n",
      "1. 주택으로만 쓰이는 건물 중 다음의 것 또는 그 수용가재  \n",
      "(ⅰ) 단독주택\n",
      "(ⅱ) 주택의 부속건물로서 가재만을 수용하는데 쓰이는 것\n",
      "(ⅲ) 연립(다세대)주택, 아파트로서 각 호(戶), 실(室)이 모두 주택으로만 쓰이는 것  \n",
      "2. 주택병용 물건으로서 아래의 용도로 사용하는 건물 및 그 수용가재  \n",
      "(ⅰ) 교습소(피아노, 꽃꽂이, 국악, 재봉 및 이와 비슷한 것)\n",
      "(ⅱ) 치료(안수, 침구(침질,뜸질), 정골, 조산원 및 이와 비슷한 것)\n",
      "\n",
      "\n",
      "[Header Doc Index] 30 ------------------------\n",
      "  Header 1:  제10조(보험목적의 범위)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 아래의 물건은 보험증권(보험가입증서)에 기재하여야만 보험의 목적이 됩니다.  \n",
      "1. 통화, 유가증권, 인지, 우표 및 이와 비슷한 것\n",
      "2. 귀금속, 귀중품(무게나 부피가 휴대할 수 있으며 점당 300만원 이상), 보옥, 보석, 글․ 그림, 골동품,  \n",
      "조각물 및 이와 비슷한 것  \n",
      "3. 원고, 설계서, 도안, 물건의 원본, 모형, 증서, 장부, 금형(쇠틀), 목형(나무틀), 소프트웨어 및 이와  \n",
      "비슷한 것\n",
      "\n",
      "\n",
      "[Header Doc Index] 31 ------------------------\n",
      "  Header 1:  제10조(보험목적의 범위)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 아래의 물건은 다른 약정이 없으면 보험의 목적에 포함됩니다.  \n",
      "1. 건물인 경우\n",
      "(ⅰ)건물의 부속물: 피보험자의 소유인 칸막이, 대문, 담, 곳간 및 이와 비슷한 것\n",
      "(ⅱ)건물의 부착물: 피보험자 소유인 간판, 네온사인, 안테나, 선전탑 및 이와 비슷한 것\n",
      "2. 가재인 경우: 피보험자와 같은 세대에 속하는 사람의 소유물\n",
      "\n",
      "\n",
      "[Header Doc Index] 32 ------------------------\n",
      "  Header 1:  제11조(보상하는 손해)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 회사는 보험의 목적이 화재(벼락을 포함합니다), 폭발 또는 파열(이하「사고」라 합니다)로 입은 아래  \n",
      "-----  \n",
      "의 손해를 보상하여 드립니다.  \n",
      "1. 사고에 따른 직접손해\n",
      "2. 사고에 따른 소방손해(화재진압과정에서 발생하는 손해)\n",
      "3. 사고에 따른 피난손해(피난지에서 5일 동안에 보험의 목적에 생긴 위 제1호 및 제2호의 손해를 포  \n",
      "함합니다)\n",
      "\n",
      "\n",
      "[Header Doc Index] 33 ------------------------\n",
      "  Header 1:  제11조(보상하는 손해)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 회사는 제1항에서 보장하는 위험으로 인하여 손해가 발생한 경우 계약자 또는 피보험자가 지출한 아  \n",
      "래의 비용을 추가로 지급합니다.  \n",
      "1. 잔존물 제거비용: 사고현장에서의 잔존물의 해체비용, 청소비용(사고현장 및 인근 지역의 토양, 대  \n",
      "기 및 수질 오염물질 제거비용과 차에 실은 후 폐기물 처리비용은 포함되지 아니합니다) 및 차에\n",
      "싣는 비용. 다만, 제1항에서 보장하지 아니하는 위험으로 보험의 목적이 손해를 입거나 관계법령에\n",
      "의하여 제거됨으로써 생긴 손해에 대하여는 보상하여 드리지 아니합니다.  \n",
      "2. 손해방지비용: 손해의 방지 또는 경감을 위하여 지출한 필요 또는 유익한 비용\n",
      "3. 대위권 보전비용: 제3자로부터 손해의 배상을 받을 수 있는 경우에는 그 권리를 지키거나 행사하기  \n",
      "위하여 지출한 필요 또는 유익한 비용  \n",
      "4. 잔존물 보전비용: 잔존물을 보전하기 위하여 지출한 필요 또는 유익한 비용. 다만, 제30조(잔존물)  \n",
      "에 의해 회사가 잔존물을 취득한 경우에 한합니다.  \n",
      "5. 기타 협력비용: 회사의 요구에 따르기 위하여 지출한 필요 또는 유익한 비용\n",
      "\n",
      "\n",
      "[Header Doc Index] 34 ------------------------\n",
      "  Header 1:  제12조(보상하지 아니하는 손해)\n",
      "      [Doc page_content]: 회사는 아래의 사유로 인한 손해는 보상하여 드리지 아니합니다.  \n",
      "1. 계약자, 피보험자(법인인 경우에는 그 이사 또는 법인의 업무를 집행하는 그 밖의 기관) 또는 이들  \n",
      "의 법정대리인의 고의 또는 중대한 과실  \n",
      "2. 화재, 폭발 또는 파열이 발생했을 때의 분실로 생긴 손해\n",
      "3. 보험의 목적의 발효, 자연발열, 자연발화로 생긴 손해. 그러나, 자연발열 또는 자연발화로 연소된  \n",
      "다른 보험의 목적에 생긴 손해는 보상하여 드립니다.  \n",
      "4. 화재, 폭발 또는 파열로 인하지 아니한 수도관, 수관, 수압기 등의 파열로 생긴 손해\n",
      "5. 발전기, 여자기(정류기 포함), 변류기, 변압기, 전압조정기, 축전기, 개폐기, 차단기, 피뢰기, 배전반  \n",
      "및 그 밖의 전기기기 또는 장치의 전기적 사고로 생긴 손해. 그러나 그 결과로 생긴 화재, 폭발, 파\n",
      "열손해는 보상하여 드립니다.  \n",
      "6. 원인의 직접, 간접을 묻지 아니하고 지진, 분화 또는 전쟁, 혁명, 내란, 사변, 폭동, 소요, 노동쟁의,  \n",
      "기타 이들과 유사한 사태로 생긴 화재 및 연소 또는 그 밖의 손해  \n",
      "7. 핵연료물질 (사용된 연료를 포함합니다. 이하 같습니다) 또는 핵연료 물질에 의하여 오염된 물질  \n",
      "(원자핵 분열 생성물을 포함합니다)의 방사성, 폭발성 그 밖의 유해한 특성 또는 이들의 특성에 의\n",
      "한 사고로 인한 손해  \n",
      "8. 위 제7호 이외의 방사선을 쬐는 것 또는 방사능 오염으로 인한 손해\n",
      "9. 국가 및 지방자치단체의 명령에 의한 재산의 소각 및 이와 유사한 손해\n",
      "\n",
      "\n",
      "[Header Doc Index] 35 ------------------------\n",
      "  Header 1:  제13조(보험금 등의 지급한도)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 제11조(보상하는 손해)제1항의 손해에 의한 보험금과 제11조(보상하는 손해)제2항의 잔존물 제거비  \n",
      "용은 각각 제23조(지급보험금의 계산)를 준용하여 계산하며, 그 합계액은 보험증권(보험가입증서)에\n",
      "기재된 보험가입금액을 한도로 합니다. 다만, 잔존물 제거비용은 손해액의 10%를 초과할 수 없습니\n",
      "다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 36 ------------------------\n",
      "  Header 1:  제13조(보험금 등의 지급한도)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 제11조(보상하는 손해)제2항의 비용손해 중 손해방지비용, 대위권 보전비용 및 잔존물 보전비용은  \n",
      "제23조(지급보험금의 계산)를 준용하여 계산한 금액이 보험가입금액을 초과하는 경우에도 이를 지급\n",
      "합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 37 ------------------------\n",
      "  Header 1:  제13조(보험금 등의 지급한도)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 제11조(보상하는 손해)제2항의 비용손해 중 기타 협력비용은 보험가입금액을 초과한 경우에도 이를  \n",
      "전액 지급합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 38 ------------------------\n",
      "  Header 1:  제14조(계약전 알릴 의무)\n",
      "      [Doc page_content]: 계약자, 피보험자 또는 이들의 대리인은 청약시 청약서(질문서를 포함합니다)에서 질문한 사항에 대하\n",
      "여 알고 있는 사실을 반드시 사실대로 알려야 합니다.  \n",
      "<용어풀이>  \n",
      "-----\n",
      "\n",
      "\n"
     ]
    }
   ],
   "source": [
    "for index, doc in enumerate(md_header_splits):\n",
    "    print(\"[Header Doc Index]\", index, \"------------------------\")\n",
    "    print(\"  Header 1: \", doc.metadata['Header 1'])\n",
    "    \n",
    "    if 'Header 2' in doc.metadata :\n",
    "        print(\"    Header 2: \", doc.metadata['Header 2'])\n",
    "    \n",
    "    print(\"      [Doc page_content]:\", doc.page_content)\n",
    "    print(\"\")\n",
    "    print(\"\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "47e9a060-def6-484f-93e3-09d52cb7a166",
   "metadata": {},
   "source": [
    "# Child Chunk 생성\n",
    "### RecursiveCharacterTextSplitter를 이용해서 RAG로 사용할 수 있도록 child chunk로 생성합니다."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "id": "8c2f32cf-dc64-4050-81bc-463bbf8160c0",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "# Char-level splits\n",
    "from langchain_text_splitters import RecursiveCharacterTextSplitter\n",
    "\n",
    "chunk_size = 250\n",
    "chunk_overlap = 30\n",
    "text_splitter = RecursiveCharacterTextSplitter(\n",
    "    chunk_size=chunk_size, chunk_overlap=chunk_overlap\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "65d1aa22-c4ac-465b-a497-625fc4dd0414",
   "metadata": {},
   "source": [
    "## Context 생성용 모델 세팅"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "id": "74542a27-6dc1-4f89-849f-e708d62cc8f7",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "WHOLE_DOCUMENT = \"\"\"Amazon Elastic Compute Cloud(Amazon EC2)는 Amazon Web Services(AWS) 클라우드에서 온디맨\n",
    "드 확장 가능 컴퓨팅 용량을 제공합니다. Amazon EC2를 사용하면 하드웨어 비용이 절감되므로 애플\n",
    "리케이션을 더욱 빠르게 개발하고 배포할 수 있습니다. Amazon EC2를 사용하여 원하는 수의 가상 서\n",
    "버를 구축하고 보안 및 네트워킹을 구성하며 스토리지를 관리할 수 있습니다. 용량을 추가(스케일 업)\n",
    "하여 월간 또는 연간 프로세스 또는 웹 사이트 트래픽 급증 등 컴퓨팅 사용량이 많은 작업을 처리할 수\n",
    "있습니다. 사용량이 감소하면 용량을 다시 축소(스케일 다운)할 수 있습니다.  \n",
    "EC2 인스턴스는 AWS 클라우드의 가상 서버입니다. EC2 인스턴스를 시작할 때 지정하는 인스턴스 유\n",
    "형에 따라 인스턴스에 사용할 수 있는 하드웨어가 결정됩니다. 인스턴스 유형마다 서로 다른 컴퓨팅,\n",
    "메모리, 네트워크 및 스토리지 리소스의 균형을 제공합니다. 자세한 내용은 Amazon EC2 인스턴스 유\n",
    "형 안내서 를 참조하세요.\"\"\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "id": "0c8f36da-16c8-4c91-9b55-4b30f15cfb84",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "CHUNK_CONTENT = \"\"\"Amazon Elastic Compute Cloud(Amazon EC2)는 Amazon Web Services(AWS) 클라우드에서 온디맨\n",
    "드 확장 가능 컴퓨팅 용량을 제공합니다. Amazon EC2를 사용하면 하드웨어 비용이 절감되므로 애플\n",
    "리케이션을 더욱 빠르게 개발하고 배포할 수 있습니다. Amazon EC2를 사용하여 원하는 수의 가상 서\n",
    "버를 구축하고 보안 및 네트워킹을 구성하며 스토리지를 관리할 수 있습니다. 용량을 추가(스케일 업)\"\"\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "id": "40b3a326-7b83-4710-bd5e-2948185b76a4",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "CONTEXUALIZER_PROMPT_TEMPLATE = f\"\"\"\\\n",
    "<document> \n",
    "{WHOLE_DOCUMENT} \n",
    "</document> \n",
    "Here is the chunk we want to situate within the whole document \n",
    "<chunk> \n",
    "{CHUNK_CONTENT} \n",
    "</chunk> \n",
    "Please give a short succinct context to situate this chunk within the overall document for the purposes of improving search retrieval of the chunk. Answer only with the succinct context and nothing else. Answer in Korean. \n",
    "\"\"\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "id": "5951cae9-bedb-4911-8c5e-f1a01b0beb6f",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "llm_response=llm_haiku.invoke(input=CONTEXUALIZER_PROMPT_TEMPLATE)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "id": "04c5fb2e-9212-4348-9711-28717dcb631e",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "본 문서는 Amazon Elastic Compute Cloud(Amazon EC2)에 대한 설명을 제공하는 문서입니다. 제시된 chunk는 Amazon EC2가 온디맨드 확장 가능 컴퓨팅 용량을 제공하고 하드웨어 비용을 절감하여 애플리케이션 개발과 배포를 용이하게 하며, 가상 서버 구축, 보안 및 네트워킹 구성, 스토리지 관리 등의 기능을 제공한다는 내용을 설명하고 있습니다.\n"
     ]
    }
   ],
   "source": [
    "print(llm_response.content)"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "bd5ace8e-2ee9-4d6a-9139-16d327a13aad",
   "metadata": {
    "tags": []
   },
   "source": [
    "## Contextual Chunk를 생성합니다.\n",
    "목차별로 나눠진 chunk (parent chunk)의 맨 뒷부분에 child chunk를 머지해서 Contextual Chunk를 생성합니다.\n",
    "그리고 나서 해당 Chunk를 page_content로 업데이트해서 저장합니다."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "id": "6eedf19f-2abe-4224-816e-aaa7c6dac529",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "----> contexual_child_chunk:  <document_context>\n",
      "제1조(보험계약의 성립): 이 문단은 보험계약의 성립 과정을 설명하고 있습니다. 보험계약은 보험계약자의 청약과 보험회사의 승낙으로 이루어지며, 이하 \"보험계약\"은 \"계약\", \"보험계약자\"는 \"계약자\", \"보험회사\"는 \"회사\"로 표현됩니다.\n",
      "</document_context> !! 보험계약은 보험계약자의 청약과 보험회사의 승낙으로 이루어집니다.(이하 “ 보험계약”은 “ 계약”, “ 보  \n",
      "험계약자” 는 “ 계약자” , “ 보험회사” 는 “ 회사” 라 합니다)\n",
      "----> contexual_child_chunk:  이 내용은 <document>에서 '제1조(보험계약의 성립)'이라는 제목의 헤더 부분에 해당합니다. 이 부분은 보험회사가 계약 청약을 받고 보험료를 받은 경우, 청약일로부터 30일 이내에 승낙 또는 거절 통지를 해야 한다는 내용을 설명하고 있습니다. !! 회사는 계약의 청약을 받고 보험료 전액(보험료를 일시에 지급하기로 약정한 경우) 또는 제1회 보험  \n",
      "료(보험료를 분납하기로 약정한 경우)(이하 ‘ 제1회 보험료 등’ 이라 합니다)를 받은 경우에는 청약일\n",
      "부터 30일 이내에 승낙 또는 거절의 통지를 하며 통지가 없으면 승낙한 것으로 봅니다.\n",
      "----> contexual_child_chunk:  이 내용은 <제1조(보험계약의 성립)>의 일부로, 보험회사가 고객의 청약을 승낙하거나 거절할 경우 어떤 절차를 거치는지 설명하고 있습니다. 즉, 보험회사가 청약을 승낙하면 지체없이 보험증권을 발급해 주어야 하며, 청약을 거절할 경우에는 거절통지와 함께 받은 금액을 돌려주어야 한다는 내용입니다. !! 회사가 청약을 승낙한 때에는 지체 없이 보험증권(보험가입증서)을 계약자에게 교부하여 드리며, 청  \n",
      "약을 거절한 경우에는 거절통지와 함께 받은 금액을 계약자에게 돌려드립니다.\n",
      "----> contexual_child_chunk:  <document-context>\n",
      "제1조(보험계약의 성립)\n",
      "이 조항은 이미 성립한 보험계약을 연장하거나 변경하는 경우, 보험회사가 보험증권(보험가입증서)에 변경사항을 기재함으로써 새로운 보험증권을 교부하지 않아도 됨을 규정하고 있습니다.\n",
      "</document-context> !! 이미 성립한 계약을 연장하거나 변경하는 경우에는 회사는 보험증권(보험가입증서)에 그 사실을 기  \n",
      "재함으로써 보험증권(보험가입증서)의 교부에 대신할 수 있습니다.\n",
      "----> contexual_child_chunk:  제2조(약관교부 및 설명의무 등)\n",
      "이 문서는 보험계약 체결 시 보험사의 약관 교부 및 설명 의무에 대해 규정하고 있습니다. 이 문서의 핵심 내용은 보험사가 계약자에게 약관과 계약자 보관용 청약서를 제공하고 약관의 중요한 내용을 설명해야 한다는 것입니다. 다만 통신판매 계약의 경우 계약자의 동의를 얻어 전자적 방법으로 약관을 제공할 수 있다고 명시하고 있습니다. !! 회사는 계약자가 청약한 경우 계약자에게 약관 및 계약자 보관용 청약서(청약서 부본)를 드리고 약  \n",
      "관의 중요한 내용을 설명하여 드립니다. 다만, 전화․ 우편․ 컴퓨터 등의 통신매체를 통한 보험계약\n",
      "(이하 “ 통신판매 계약” 이라 합니다)의 경우에는 회사는 계약자의 동의를 얻어 다음 중 한 가지 방\n",
      "법으로 할 수 있습니다.  \n",
      "1. 광기록매체 또는 전자우편 등의 전자적 방법으로 약관이나 계약자 보관용 청약서(청약서 부본)를\n",
      "----> contexual_child_chunk:  <제2조(약관교부 및 설명의무 등)>\n",
      "이 문서는 보험계약에 관한 약관 조항을 설명하고 있습니다. 해당 chunk는 보험회사가 통신판매 계약의 경우 약관 및 중요사항 설명 방법에 대해 자세히 기술하고 있습니다. 구체적으로는 전자적 방법으로 약관을 송부하거나 사이버몰에서 약관 및 설명문을 제공하는 방법을 명시하고 있습니다. !! 송부하는 방법. 이 경우 계약자 또는 그 대리인이 이를 수신한 때에 당해 약관이나 계약자 보관용\n",
      "청약서(청약서 부본)를 드린 것으로 봅니다.  \n",
      "2. 사이버몰(컴퓨터를 이용하여 보험거래를 할 수 있도록 설정된 가상의 영업장)에서 약관 및 그 설명  \n",
      "문(약관의 중요한 내용을 알 수 있도록 설명한 문서)을 읽거나 내려받게 하는 방법. 이 경우 계약\n",
      "자가 이를 읽거나 내려받은 것을 확인한 때에 당해 약관을 드리고 그 중요한 내용을 설명한 것으\n",
      "----> contexual_child_chunk:  이 내용은 <document>의 \"제2조(약관교부 및 설명의무 등)\"에 해당합니다. 이 조항은 보험 계약 체결 시 회사의 약관 교부 및 설명 의무에 대해 규정하고 있으며, 특히 통신판매 계약의 경우 회사가 취할 수 있는 대체 방법들을 명시하고 있습니다. 이 chunk는 그 중 하나의 방법, 즉 전화를 이용한 설명 방법에 대한 내용입니다. !! 로 봅니다.  \n",
      "3. 전화를 이용하여 청약내용, 보험료납입, 보험기간, 계약전 알릴의무, 약관의 중요한 내용 등 계약  \n",
      "체결을 위하여 필요한 사항을 질문 또는 설명하는 방법. 이 경우 계약자의 답변과 확인내용을 음성\n",
      "녹음함으로써 약관의 중요한 내용을 설명한 것으로 봅니다.\n",
      "----> contexual_child_chunk:  이 내용은 \"제2조(약관교부 및 설명의무 등)\"의 헤더 아래에 위치합니다. 이 조항은 보험회사가 약관과 청약서를 고객에게 제공하고 약관의 중요한 내용을 설명할 의무에 대해 설명하고 있습니다. 또한 고객이 청약서에 자필서명을 하지 않은 경우 계약 체결일로부터 1개월 이내에 계약을 취소할 수 있음을 명시하고 있습니다. !! 회사가 제1항에 의해 제공될 약관 및 계약자 보관용 청약서(청약서 부본)를 청약 시 계약자에게 드  \n",
      "리지 아니하거나 약관의 중요한 내용을 설명하지 아니한 때 또는 계약을 체결할 때 계약자가 청약서\n",
      "에 자필서명[날인(도장을 찍음) 또는 전자서명법 제2조 제10호의 규정에 의한 공인인증기관이 인증\n",
      "한 전자서명을 포함합니다)]을 하지 아니한 때에는 계약자는 계약체결일부터 1개월 이내에 계약을\n",
      "취소할 수 있습니다.\n",
      "----> contexual_child_chunk:  이 문서의 제목은 \"제2조(약관교부 및 설명의무 등)\"입니다. 이 chunk는 해당 조항의 제2항에 해당하며, 계약이 취소된 경우 보험사가 납입한 보험료와 이에 대한 이자를 계약자에게 지급해야 한다는 내용을 담고 있습니다. !! 제2항에 따라 계약이 취소된 경우에는 회사는 이미 납입한 보험료를 계약자에게 돌려드리며, 보험료  \n",
      "를 받은 기간에 대하여 보험개발원이 공시하는 정기예금이율을 연단위 복리로 계산한 금액을 더하여\n",
      "지급합니다.\n",
      "----> contexual_child_chunk:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "이 chunk는 보험계약 체결 시 보험회사가 보장을 개시하는 시점에 대한 내용을 다루고 있습니다. 구체적으로 보험회사가 계약 청약을 승낙하고 제1회 보험료를 받은 때부터 보장을 제공한다는 내용을 포함하고 있습니다. !! 회사는 계약의 청약을 승낙하고 제1회 보험료 등을 받은 때부터 이 약관이 정한 바에 따라 보장을  \n",
      "합니다.\n",
      "----> contexual_child_chunk:  제3조(제1회 보험료 등 및 회사의 보장개시)는 보험회사가 계약자로부터 제1회 보험료를 받고 청약을 승낙하기 전에 보험금 지급사유가 발생한 경우에도 계약상의 보장을 한다는 내용을 담고 있습니다. 이 조항은 보험회사의 보장 개시 시점과 관련된 규정입니다. !! 회사가 계약자로부터 계약의 청약과 함께 제1회 보험료 등을 받은 경우에 그 청약을 승낙하기 전에  \n",
      "계약에서 정한 보험금 지급사유가 생긴 때에는 회사는 계약상의 보장을 합니다.\n",
      "----> contexual_child_chunk:  이 문서는 보험 계약에 관한 조항들을 다루고 있습니다. 제3조(제1회 보험료 등 및 회사의 보장개시)의 제2항에서는 보험회사가 보장을 하지 않는 경우를 규정하고 있습니다. 이 chunk는 해당 조항의 내용을 자세히 설명하고 있으며, 보험계약자 또는 피보험자의 행위나 사유로 인해 보험회사가 보장을 하지 않을 수 있는 두 가지 경우를 명시하고 있습니다. !! 제2항의 규정에도 불구하고 회사는 다음 중 한 가지에 해당되는 경우에는 보장을 하지 아니합니다.  \n",
      "1. 제14조(계약전 알릴 의무)의 규정에 의하여 계약자 또는 피보험자가 회사에 알린 내용이 보험금  \n",
      "지급사유의 발생에 영향을 미쳤음을 회사가 증명하는 경우  \n",
      "2. 제12조(보상하지 아니하는 손해), 제16조(계약의 해지), 제18조(계약의 무효) 또는 제27조(사기에  \n",
      "의한 계약)의 규정을 준용하여 회사가 보장을 하지 아니할 수 있는 경우\n",
      "----> contexual_child_chunk:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "\n",
      "이 문단은 계약자가 제1회 보험료를 자동이체 또는 신용카드로 납입하는 경우와 자동이체 및 매출승인이 불가능한 경우에 대한 내용을 다루고 있습니다. 계약자가 회사에 자동이체 및 신용카드 관련 정보를 제공하면 제1회 보험료 납입으로 간주되지만, 계약자의 귀책사유로 납입이 불가능한 경우에는 실제로 제1회 보험료가 납입되지 않은 것으로 간주됩니다. !! 계약자가 제1회 보험료 등을 자동이체 또는 신용카드로 납입하는 경우에는 자동이체신청 및 신용카  \n",
      "드매출 승인에 필요한 정보를 회사에 제공한 때가 제1회 보험료 등을 납입한 때가 되나, 계약자의\n",
      "귀책사유로 자동이체 또는 매출승인이 불가능한 경우에는 제1회 보험료 등이 납입되지 않은 것으로\n",
      "봅니다.  \n",
      "-----\n",
      "----> contexual_child_chunk:  이 문장은 '제3조(제1회 보험료 등 및 회사의 보장개시)' 항목에 속하며, 보험 계약이 갱신되는 경우 기존 계약에 의한 보장이 종료되면 이 항목에 의한 보장이 적용된다는 내용입니다. !! 계약이 갱신되는 경우에는 제1항 내지 제3항에 의한 보장은 기존 계약에 의한 보장이 종료하는 때부  \n",
      "터 적용합니다.\n",
      "----> contexual_child_chunk:  이 chunk는 문서의 「제4조(제2회 이후 보험료의 납입)」 부분에 속합니다. 이 조항은 계약자가 제2회 이후의 보험료를 약속한 기일까지 납부해야 하며, 회사는 납입받은 경우 영수증을 발행하지만 금융회사를 통해 납입한 경우에는 그 증빙서류로 대신한다는 내용을 담고 있습니다. !! 계약자는 제2회 이후의 보험료를 계약 체결시 납입하기로 약속한 날(이하납입기일이라 합니다)까\n",
      "지 납입하여야 하며, 회사는 계약자가 보험료를 납입한 경우에는 영수증을 발행하여 드립니다. 다만, 금\n",
      "융회사(우체국을 포함합니다)룰 통하여 보험료를 납입한 경우에는 그 금융회사 발행 증빙서류를 영수증\n",
      "으로 대신합니다.\n",
      "----> contexual_child_chunk:  이 문서의 제5조(청약의 철회)에서는 가계성 보험에 한해 계약자가 청약을 한 날로부터 15일 이내에 청약을 철회할 수 있다고 명시하고 있습니다. 단, 단체(취급)계약이나 보험기간 1년 미만 계약, 또는 보험기간 1년 이상의 통신판매 계약의 경우에는 청약 철회가 허용되지 않습니다. !! 가계성 보험[개인의 일상생활과 관련된 보험으로 보험료를 단체 또는 법인이 부담하지 않는 개인보  \n",
      "험계약과 단체요율(피보험자가 단체인 계약에 적용되는 요율)이 적용되지 않는 계약을 말합니다]에\n",
      "한하여 계약자는 청약을 한 날부터 15일 이내에 그 청약을 철회할 수 있습니다. 다만, 단체(취급)계\n",
      "약 또는 보험기간이 1년 미만인 계약의 경우에는 청약을 철회할 수 없으며, 통신판매 계약(보험기간\n",
      "----> contexual_child_chunk:  제5조(청약의 철회)의 일부\n",
      "\n",
      "이 문서는 보험계약에 관한 내용을 다루고 있으며, 그중 제5조에서는 보험 청약의 철회에 대한 규정을 명시하고 있습니다. 제시된 chunk는 이 제5조의 일부로, 통신판매 계약의 경우 청약 철회 기한이 청약일로부터 30일 이내라고 설명하고 있습니다. !! 이 1년 이상인 계약에 한함)의 경우에는 청약을 한 날부터 30일 이내에 그 청약을 철회할 수 있습니\n",
      "다.\n",
      "----> contexual_child_chunk:  이 문서의 제5조(청약의 철회) 섹션에서는 회사가 고객의 청약 철회 요청을 받은 경우, 3일 이내에 이미 납입한 보험료를 고객에게 반환하여야 하며, 반환이 지연되는 경우 정기예금이율을 적용하여 이자를 더하여 지급해야 한다고 명시하고 있습니다. 다만 고객이 신용카드로 보험료를 납입한 경우에는 회사가 신용카드 매출을 취소하며 이자를 지급하지 않는다는 예외 사항도 포함되어 있습니다. !! 회사는 청약의 철회를 접수한 경우에는 3일 이내에 이미 납입한 보험료를 계약자에게 돌려 드리며,  \n",
      "보험료 반환이 지체된 기간에 대하여는 보험개발원이 공시하는 정기예금이율을 연단위 복리로 계산\n",
      "한 금액을 더하여 지급합니다. 다만, 계약자가 제1회 보험료 등을 신용카드로 납입한 계약의 청약을\n",
      "철회하는 경우에 회사는 신용카드의 매출을 취소하며 이자를 더하여 지급하지 아니합니다.\n",
      "----> contexual_child_chunk:  이 문서의 헤더 제목은 '제5조(청약의 철회)'입니다. 이 chunk는 보험계약자가 보험금 지급 사유가 이미 발생했음을 알지 못한 상태에서 청약을 철회하려 할 때, 청약 철회의 효력이 발생하지 않는다는 내용입니다. !! 청약을 철회할 당시에 이미 보험금 지급사유가 발생하였으나 계약자가 그 보험금 지급사유의 발생사  \n",
      "실을 알지 못한 경우에는 청약철회의 효력은 발생하지 않습니다.\n",
      "----> contexual_child_chunk:  이 내용은 <document>의 헤더인 \"제6조(계약내용의 변경 등)\"에 속합니다. 이 조항은 보험계약자가 보험회사의 승낙을 얻어 보험종목, 보험기간, 보험료 납입주기 및 방법, 계약자 및 피보험자 정보 등 계약 내용을 변경할 수 있다는 것을 규정하고 있습니다. !! 계약자는 회사의 승낙을 얻어 다음의 사항을 변경할 수 있습니다. 이 경우 승낙을 서면 등으로 알리  \n",
      "거나 보험증권(보험가입증서)의 뒷면에 기재하여 드립니다.  \n",
      "1. 보험종목\n",
      "2. 보험기간\n",
      "3. 보험료 납입주기, 수금방법 및 납입기간\n",
      "4. 계약자, 피보험자, 보험가입금액 등 기타 계약의 내용\n",
      "----> contexual_child_chunk:  제6조(계약내용의 변경 등)\n",
      "\n",
      "이 문단은 계약자가 계약체결 1년 이상 경과 후 보험종목의 변경을 요청할 경우, 회사가 사업방법서에 따라 보험종목을 변경할 수 있음을 규정하고 있습니다. !! 회사는 계약자가 제1회 보험료 등을 납입한 때부터 1년 이상 경과된 유효한 계약으로서 그 보험종목  \n",
      "의 변경을 요청할 때에는 회사의 사업방법서에서 정하는 방법에 따라 이를 변경하여 드립니다.\n",
      "----> contexual_child_chunk:  이 문장은 <document>의 제6조(계약내용의 변경 등)에 해당합니다. 이 조항은 계약자가 보험가입금액을 감액하고자 할 때, 그 감액된 부분은 계약이 해지된 것으로 보며, 회사는 관련 보험료를 계약자에게 환급해야 한다는 내용을 명시하고 있습니다. !! 회사는 계약자가 제1항 제4호의 규정에 의하여 보험가입금액을 감액하고자 할 때에는 그 감액된 부  \n",
      "분은 계약이 해지된 것으로 보며, 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는 19조\n",
      "(보험료의 환급)에 따라 이를 계약자에게 지급합니다.\n",
      "----> contexual_child_chunk:  이 내용은 <document>의 '제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]'에 해당하는 것으로, 계약자가 보험료를 납입기일까지 납입하지 않아 보험료 납입이 연체된 경우, 회사가 계약자에게 납입최고(독촉) 및 계약 해지 관련 사항을 알려주는 내용입니다. !! 계약자가 제2회 이후의 보험료를 납입기일까지 납입하지 아니하여 보험료 납입이 연체 중인 경우에  \n",
      "는, 회사는 14일(보험기간이 1년 미만인 경우에는 7일) 이상의 기간을 납입최고(독촉)기간으로 정하\n",
      "여 계약자(타인을 위한 계약의 경우 그 특정된 타인을 포함합니다)에게 다음의 내용을 서면(등기우편\n",
      "등), 전화(음성녹음) 또는 전자문서 등으로 알려드립니다. 다만, 계약이 해지되기 전에 발생한 보험금\n",
      "----> contexual_child_chunk:  이 인용문은 <document>에서 '제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]'의 내용 중 일부를 나타내고 있습니다. 이 부분은 보험료 납입이 연체되었을 때 회사가 계약자에게 통지해야 할 사항들을 설명하고 있습니다. 구체적으로 연체보험료 납입, 계약 해지, 그리고 보험계약대출 원리금 차감 등의 내용을 포함하고 있습니다. !! 지급사유에 대하여 회사는 계약상의 보장을 합니다.  \n",
      "1. 납입최고(독촉)기간 안에 연체보험료를 납입하여야 한다는 내용\n",
      "2. 납입최고(독촉)기간이 끝나는 날까지 보험료를 납입하지 아니할 경우 그 끝나는 날의 다음날에 계  \n",
      "약이 해지된다는 내용  \n",
      "3. 계약자가 회사로부터 보험계약대출을 받은 경우에는, 계약이 해지되는 즉시 해지환급금에서 보험계  \n",
      "약대출 원리금이 차감된다는 내용\n",
      "----> contexual_child_chunk:  이 chunk는 제7조 [보험료의 납입연체시 납입최고(독촉)와 계약의 해지]의 제1항에 해당되는 내용입니다. 이 조항은 계약자에게 납입최고(독촉) 통지가 도달한 날부터 시작되는 납입최고(독촉)기간과 그 기간의 말일에 관해 설명하고 있습니다. !! 제1항의 납입최고(독촉)기간은 납입최고(독촉)의 통지가 계약자(타인을 위한 계약의 경우에는 그 특  \n",
      "정된 타인을 포함)에게 도달한 날부터 시작되며, 그 기간의 말일(말일이 토요일 또는 공휴일인 경우\n",
      "에는 그 다음의 최초의 평일)에 끝납니다.\n",
      "----> contexual_child_chunk:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지] \n",
      "이 문서의 제7조에서는 보험료 납입이 연체된 경우 보험회사의 납입최고(독촉) 절차에 대해 규정하고 있습니다. 해당 chunk는 보험회사가 납입최고(독촉)를 전자문서로 안내하고자 할 경우의 절차에 대해 설명하고 있습니다. !! 회사가 제1항에 의한 납입최고(독촉) 등을 전자문서로 안내하고자 할 경우에는 계약자의 서면에 의  \n",
      "한 동의를 얻어 수신확인을 조건으로 전자문서를 송신하여야 하며, 계약자가 전자문서에 대하여 수\n",
      "신을 확인하기 전까지는 그 전자문서는 송신되지 아니한 것으로 봅니다. 회사는 전자문서가 수신되  \n",
      "-----  \n",
      "지 아니한 것으로 확인되는 경우에는 제1항의 납입최고(독촉)기간을 설정하여 제1항에서 정한 내용\n",
      "----> contexual_child_chunk:  이 내용은 「제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]」에 속하는 것으로, 회사가 전자문서로 납입최고(독촉)를 할 경우에 계약자가 이를 확인하지 않으면 해당 전자문서가 전송되지 않은 것으로 간주되며, 이 경우 회사가 서면이나 전화로 다시 납입최고(독촉) 내용을 알려주게 된다는 내용입니다. !! 을 서면(등기우편 등) 또는 전화(음성녹음)로 다시 알려 드립니다.\n",
      "----> contexual_child_chunk:  이 문서의 헤더 제목은 \"제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\"입니다. 이 문서의 해당 부분은 보험계약이 해지된 경우 회사가 계약자에게 환급해야 할 보험료에 대한 내용을 다루고 있습니다. !! 제1항에 따라 계약이 해지된 경우에는 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는  \n",
      "제19조(보험료의 환급)에 따라 이를 계약자에게 지급합니다.\n",
      "----> contexual_child_chunk:  이 문서의 제8조 「보험료의 납입연체로 인한 해지계약의 부활(효력회복)」에 해당하는 내용입니다. 이 조항에서는 보험료 납입이 연체되어 계약이 해지되었더라도, 계약자가 환급금을 받지 않은 경우 일정 기간 내에 해지 계약의 부활을 청구할 수 있으며, 이때 연체된 보험료와 이자를 납입해야 한다는 내용을 설명하고 있습니다. !! 제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]에 따라 계약이 해지되었으나 계약자가  \n",
      "제19조(보험료의 환급)에 따른 환급금을 받지 아니한 경우 계약자는 해지된 날부터 2년 이내에 회사\n",
      "가 정한 절차에 따라 계약의 부활(효력회복)을 청약할 수 있습니다. 이 경우 회사가 그 청약을 승낙\n",
      "한 때에는 계약자는 부활(효력회복)을 청약한 날까지의 연체된 보험료에 보험개발원이 공시하는 정\n",
      "----> contexual_child_chunk:  이 문구는 「제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]」 항목에 속합니다. 이 항목은 계약이 해지된 경우, 계약자가 계약 부활을 청약할 수 있는 조건과 관련된 내용입니다. 문구는 계약자가 부활을 청약한 경우, 연체된 보험료와 함께 납부해야 할 추가 금액에 대해 설명하고 있습니다. !! 기예금이율 + 1% 범위내에서 각 상품별로 회사가 정하는 이율로 계산한 금액을 더하여 납입하여야\n",
      "합니다.\n",
      "----> contexual_child_chunk:  이 chunk는 문서의 「제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]」 항목에 속합니다. 이 항목은 보험계약이 해지된 경우, 계약자가 보험료를 납부하여 계약을 부활(효력회복)시키는 절차와 관련된 내용을 다루고 있습니다. 제1항에서는 계약 부활 시 적용되어야 할 기존 조항들을 명시하고 있습니다. !! 제1항에 따라 해지계약을 부활(효력회복)하는 경우에는 제1조(보험계약의 성립), 제3조(제1회 보험료  \n",
      "등 및 회사의 보장개시), 제14조(계약 전 알릴의무) 및 제16조(계약의 해지)의 규정을 준용합니다.\n",
      "----> contexual_child_chunk:  이 텍스트 청크는 <document>의 제9조 [강제집행 등으로 인한 해지계약의 특별부활(효력회복)]에 속합니다. 이 조항은 타인을 위한 보험계약에서 계약자의 해지환급금에 대한 강제집행 등으로 인해 계약이 해지된 경우, 피보험자가 계약자의 동의를 얻어 회사에 지급한 금액으로 계약을 특별부활할 수 있음을 규정하고 있습니다. !! 타인을 위한 계약의 경우 제19조(보험료의 환급)에 따른 계약자의 해지환급금 청구권에 대한 강제집  \n",
      "행, 담보권실행, 국세 및 지방세 체납처분절차에 의해 계약이 해지된 경우에는, 회사는 해지 당시의\n",
      "피보험자가 계약자의 동의를 얻어 계약 해지로 회사가 채권자에게 지급한 금액을 회사에게 지급하고\n",
      "제6조(계약내용의 변경 등) 제1항의 절차에 따라 계약자 명의를 피보험자로 변경하여 계약의 특별부\n",
      "----> contexual_child_chunk:  제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]에 따르면, 타인을 위한 계약의 경우 계약이 해지된 경우에도 피보험자는 계약자의 동의를 얻어 계약의 특별부활(효력회복)을 청약할 수 있음을 회사가 통지하여야 한다는 내용입니다. !! 활(효력회복)을 청약할 수 있음을 피보험자에게 통지하여야 합니다.\n",
      "----> contexual_child_chunk:  이 chunk는 \"제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\"라는 제목의 헤더 아래에 있습니다. 이 chunk는 회사가 계약자의 명의변경 신청과 계약의 특별부활(효력회복) 청약을 승낙하면 계약이 청약한 때부터 특별부활(효력회복)됨을 설명하고 있습니다. !! 회사는 제1항에 의한 계약자 명의변경 신청 및 계약의 특별부활(효력회복) 청약을 승낙하며, 계약은  \n",
      "청약한 때부터 특별부활(효력회복) 됩니다.\n",
      "----> contexual_child_chunk:  이 내용은 <document>의 제9조 [강제집행 등으로 인한 해지계약의 특별부활(효력회복)]에 해당합니다. 이 조항은 보험계약이 해지된 경우, 보험회사의 통지 기한과 계약자의 특별부활(효력회복) 신청에 대해 규정하고 있습니다. !! 회사는 제1항의 통지를 계약이 해지된 날부터 7일 이내에 하여야 합니다. 다만, 회사의 통지가 7일  \n",
      "을 경과하여 도달하고 이후 피보험자가 제1항에 의한 계약자 명의변경 신청 및 계약의 특별부활(효\n",
      "력회복)을 청약한 경우에는 계약이 해지된 날부터 7일이 되는 날에 특별부활(효력회복) 됩니다.\n",
      "----> contexual_child_chunk:  이 문구는 <document>의 제9조 [강제집행 등으로 인한 해지계약의 특별부활(효력회복)]에 속합니다. 이 조항에 따르면, 피보험자는 통지를 받은 날로부터 15일 이내에 제1항에 명시된 절차를 이행할 수 있습니다. !! 피보험자는 통지를 받은 날부터 15일 이내에 제1항의 절차를 이행할 수 있습니다.\n",
      "----> contexual_child_chunk:  이 chunk는 제10조(보험목적의 범위)에 해당하며, 보험증권에 기재된 건물과 그에 속한 가재들이 보험의 목적이 됨을 설명하고 있습니다. 구체적으로 주택으로만 쓰이는 건물과 주택병용 물건으로 사용되는 건물 및 그 수용가재들이 보험의 목적에 포함됨을 명시하고 있습니다. !! 이 약관에서 보험의 목적이라 함은 이 약관에 따라 보험에 가입한 물건으로서 보험증권(보험가입증  \n",
      "서)에 기재된 건물 등을 말합니다.  \n",
      "1. 주택으로만 쓰이는 건물 중 다음의 것 또는 그 수용가재  \n",
      "(ⅰ) 단독주택\n",
      "(ⅱ) 주택의 부속건물로서 가재만을 수용하는데 쓰이는 것\n",
      "(ⅲ) 연립(다세대)주택, 아파트로서 각 호(戶), 실(室)이 모두 주택으로만 쓰이는 것  \n",
      "2. 주택병용 물건으로서 아래의 용도로 사용하는 건물 및 그 수용가재\n",
      "----> contexual_child_chunk:  이 내용은 제10조(보험목적의 범위)에 포함되는 것으로, 보험의 목적이 되는 건물 및 수용가재의 범위를 설명하고 있습니다. 그 중 주택병용 물건으로서 교습소와 치료 용도로 사용되는 건물 및 수용가재에 대해 구체적으로 명시하고 있습니다. !! (ⅰ) 교습소(피아노, 꽃꽂이, 국악, 재봉 및 이와 비슷한 것)\n",
      "(ⅱ) 치료(안수, 침구(침질,뜸질), 정골, 조산원 및 이와 비슷한 것)\n",
      "----> contexual_child_chunk:  이 문단은 <document>의 제10조(보험목적의 범위)에 해당합니다. 이 조항에서는 보험의 목적이 되는 물건들을 구체적으로 열거하고 있습니다. 이 문단은 보험의 대상이 되는 물건들의 범위와 종류를 설명하고 있습니다. !! 아래의 물건은 보험증권(보험가입증서)에 기재하여야만 보험의 목적이 됩니다.  \n",
      "1. 통화, 유가증권, 인지, 우표 및 이와 비슷한 것\n",
      "2. 귀금속, 귀중품(무게나 부피가 휴대할 수 있으며 점당 300만원 이상), 보옥, 보석, 글․ 그림, 골동품,  \n",
      "조각물 및 이와 비슷한 것  \n",
      "3. 원고, 설계서, 도안, 물건의 원본, 모형, 증서, 장부, 금형(쇠틀), 목형(나무틀), 소프트웨어 및 이와  \n",
      "비슷한 것\n",
      "----> contexual_child_chunk:  이 chunk는 문서의 \"제10조(보험목적의 범위)\" 부분에 해당합니다. 이 조항에서는 보험의 목적에 포함되는 물건들을 구체적으로 명시하고 있습니다. 건물과 가재도구에 대한 기준을 제시하여 보험 적용 범위를 규정하고 있습니다. !! 아래의 물건은 다른 약정이 없으면 보험의 목적에 포함됩니다.  \n",
      "1. 건물인 경우\n",
      "(ⅰ)건물의 부속물: 피보험자의 소유인 칸막이, 대문, 담, 곳간 및 이와 비슷한 것\n",
      "(ⅱ)건물의 부착물: 피보험자 소유인 간판, 네온사인, 안테나, 선전탑 및 이와 비슷한 것\n",
      "2. 가재인 경우: 피보험자와 같은 세대에 속하는 사람의 소유물\n",
      "----> contexual_child_chunk:  이 청크는 문서의 \"제11조(보상하는 손해)\" 부분에 속합니다. 이 조항에서는 회사가 보험의 목적이 화재, 폭발 또는 파열로 인해 발생한 직접 손해, 소방 손해, 피난 손해를 보상해 주는 내용을 다루고 있습니다. !! 회사는 보험의 목적이 화재(벼락을 포함합니다), 폭발 또는 파열(이하「사고」라 합니다)로 입은 아래  \n",
      "-----  \n",
      "의 손해를 보상하여 드립니다.  \n",
      "1. 사고에 따른 직접손해\n",
      "2. 사고에 따른 소방손해(화재진압과정에서 발생하는 손해)\n",
      "3. 사고에 따른 피난손해(피난지에서 5일 동안에 보험의 목적에 생긴 위 제1호 및 제2호의 손해를 포  \n",
      "함합니다)\n",
      "----> contexual_child_chunk:  이 청크는 문서의 <document>태그 내부에 있는 「제11조(보상하는 손해)」라는 헤더 아래에 속합니다. 이 헤더에서는 회사가 제1항에서 보장하는 위험으로 인해 발생한 손해에 대해 계약자 또는 피보험자가 지출한 특정 비용을 추가로 지급한다는 내용을 다루고 있습니다. !! 회사는 제1항에서 보장하는 위험으로 인하여 손해가 발생한 경우 계약자 또는 피보험자가 지출한 아  \n",
      "래의 비용을 추가로 지급합니다.  \n",
      "1. 잔존물 제거비용: 사고현장에서의 잔존물의 해체비용, 청소비용(사고현장 및 인근 지역의 토양, 대  \n",
      "기 및 수질 오염물질 제거비용과 차에 실은 후 폐기물 처리비용은 포함되지 아니합니다) 및 차에\n",
      "싣는 비용. 다만, 제1항에서 보장하지 아니하는 위험으로 보험의 목적이 손해를 입거나 관계법령에\n",
      "----> contexual_child_chunk:  이 문단은 「제11조(보상하는 손해)」 헤더에 속합니다. 회사는 특정한 위험으로 인해 발생한 손해에 대해 계약자 또는 피보험자가 지출한 비용을 추가로 지급하는데, 이 문단은 그 중 손해방지비용, 대위권 보전비용, 잔존물 보전비용에 대해 설명하고 있습니다. !! 의하여 제거됨으로써 생긴 손해에 대하여는 보상하여 드리지 아니합니다.  \n",
      "2. 손해방지비용: 손해의 방지 또는 경감을 위하여 지출한 필요 또는 유익한 비용\n",
      "3. 대위권 보전비용: 제3자로부터 손해의 배상을 받을 수 있는 경우에는 그 권리를 지키거나 행사하기  \n",
      "위하여 지출한 필요 또는 유익한 비용  \n",
      "4. 잔존물 보전비용: 잔존물을 보전하기 위하여 지출한 필요 또는 유익한 비용. 다만, 제30조(잔존물)\n",
      "----> contexual_child_chunk:  이 부분은 <document>의 제11조(보상하는 손해)에 해당합니다. 이 조항에서는 회사가 보장하는 위험으로 인해 발생한 손해에 대해 회사가 추가적으로 지급하는 비용에 대해 설명하고 있습니다. 이 부분은 잔존물 보전비용과 기타 협력비용에 대해 다루고 있습니다. !! 에 의해 회사가 잔존물을 취득한 경우에 한합니다.  \n",
      "5. 기타 협력비용: 회사의 요구에 따르기 위하여 지출한 필요 또는 유익한 비용\n",
      "----> contexual_child_chunk:  이 내용은 제12조(보상하지 아니하는 손해)에 해당합니다. 이 조항은 회사가 보상하지 않는 손해의 사유들을 열거하고 있습니다. 제시된 chunk는 그 중 계약자 또는 피보험자의 고의나 과실, 화재나 폭발로 인한 분실, 자연발열이나 자연발화로 인한 손해 등을 구체적으로 명시하고 있습니다. !! 회사는 아래의 사유로 인한 손해는 보상하여 드리지 아니합니다.  \n",
      "1. 계약자, 피보험자(법인인 경우에는 그 이사 또는 법인의 업무를 집행하는 그 밖의 기관) 또는 이들  \n",
      "의 법정대리인의 고의 또는 중대한 과실  \n",
      "2. 화재, 폭발 또는 파열이 발생했을 때의 분실로 생긴 손해\n",
      "3. 보험의 목적의 발효, 자연발열, 자연발화로 생긴 손해. 그러나, 자연발열 또는 자연발화로 연소된  \n",
      "다른 보험의 목적에 생긴 손해는 보상하여 드립니다.\n",
      "----> contexual_child_chunk:  이 chunk는 문서의 제12조(보상하지 아니하는 손해) 항목에 속합니다. 이 조항은 회사가 보상하지 않는 손해의 종류를 나열하고 있으며, 여기에는 수도관, 수관, 수압기 등의 파열로 인한 손해와 전기기기의 전기적 사고로 생긴 손해가 포함됩니다. 다만 전기사고로 인한 화재, 폭발, 파열 손해는 예외적으로 보상해 준다고 명시되어 있습니다. !! 4. 화재, 폭발 또는 파열로 인하지 아니한 수도관, 수관, 수압기 등의 파열로 생긴 손해\n",
      "5. 발전기, 여자기(정류기 포함), 변류기, 변압기, 전압조정기, 축전기, 개폐기, 차단기, 피뢰기, 배전반  \n",
      "및 그 밖의 전기기기 또는 장치의 전기적 사고로 생긴 손해. 그러나 그 결과로 생긴 화재, 폭발, 파\n",
      "열손해는 보상하여 드립니다.\n",
      "----> contexual_child_chunk:  이 청구는 문서의 '제12조(보상하지 아니하는 손해)' 섹션에 속합니다. 이 섹션에서는 회사가 보상하지 않는 특정한 손해에 대해 설명하고 있습니다. 제6호와 제7호는 자연재해, 전쟁, 방사능 관련 사고로 인한 손해에 대해 다루고 있습니다. !! 열손해는 보상하여 드립니다.  \n",
      "6. 원인의 직접, 간접을 묻지 아니하고 지진, 분화 또는 전쟁, 혁명, 내란, 사변, 폭동, 소요, 노동쟁의,  \n",
      "기타 이들과 유사한 사태로 생긴 화재 및 연소 또는 그 밖의 손해  \n",
      "7. 핵연료물질 (사용된 연료를 포함합니다. 이하 같습니다) 또는 핵연료 물질에 의하여 오염된 물질  \n",
      "(원자핵 분열 생성물을 포함합니다)의 방사성, 폭발성 그 밖의 유해한 특성 또는 이들의 특성에 의\n",
      "한 사고로 인한 손해\n",
      "----> contexual_child_chunk:  이 내용은 <document>의 제12조(보상하지 아니하는 손해)에 포함되어 있습니다. 이 조항은 보험회사가 보상하지 않는 손해에 대해 규정하고 있습니다. 해당 chunk는 방사선 및 방사능 오염으로 인한 손해와 국가/지자체의 명령에 따른 재산 소각 등 보험회사가 보상하지 않는 손해에 대한 내용을 포함하고 있습니다. !! 한 사고로 인한 손해  \n",
      "8. 위 제7호 이외의 방사선을 쬐는 것 또는 방사능 오염으로 인한 손해\n",
      "9. 국가 및 지방자치단체의 명령에 의한 재산의 소각 및 이와 유사한 손해\n",
      "----> contexual_child_chunk:  이 문서의 제13조(보험금 등의 지급한도)에서는 제11조(보상하는 손해)에 명시된 손해에 대한 보험금 지급 한도와 잔존물 제거비용에 대해 규정하고 있습니다. 이 조항에 따르면 보험금과 잔존물 제거비용의 합계액은 보험증권에 기재된 보험가입금액을 초과할 수 없으며, 잔존물 제거비용은 손해액의 10%를 넘을 수 없습니다. !! 제11조(보상하는 손해)제1항의 손해에 의한 보험금과 제11조(보상하는 손해)제2항의 잔존물 제거비  \n",
      "용은 각각 제23조(지급보험금의 계산)를 준용하여 계산하며, 그 합계액은 보험증권(보험가입증서)에\n",
      "기재된 보험가입금액을 한도로 합니다. 다만, 잔존물 제거비용은 손해액의 10%를 초과할 수 없습니\n",
      "다.\n",
      "----> contexual_child_chunk:  이 문구는 '제13조(보험금 등의 지급한도)'의 내용에 해당합니다. 이 조항은 제11조에서 규정한 비용손해 중 손해방지비용, 대위권 보전비용 및 잔존물 보전비용이 보험가입금액을 초과하더라도 지급하는 것을 규정하고 있습니다. !! 제11조(보상하는 손해)제2항의 비용손해 중 손해방지비용, 대위권 보전비용 및 잔존물 보전비용은  \n",
      "제23조(지급보험금의 계산)를 준용하여 계산한 금액이 보험가입금액을 초과하는 경우에도 이를 지급\n",
      "합니다.\n",
      "----> contexual_child_chunk:  이 문서의 헤더는 '제13조(보험금 등의 지급한도)'입니다. 이 문서의 해당 chunk는 보험가입금액을 초과한 경우에도 전액 지급하는 기타 협력비용에 대한 내용입니다. !! 제11조(보상하는 손해)제2항의 비용손해 중 기타 협력비용은 보험가입금액을 초과한 경우에도 이를  \n",
      "전액 지급합니다.\n",
      "----> contexual_child_chunk:  이 문구는 제14조(계약전 알릴 의무)의 내용에 해당합니다. 이 조항에서는 계약자, 피보험자 또는 이들의 대리인이 청약서에 기재된 질문사항에 대해 알고 있는 사실을 사실대로 알려야 한다고 명시하고 있습니다. !! 계약자, 피보험자 또는 이들의 대리인은 청약시 청약서(질문서를 포함합니다)에서 질문한 사항에 대하\n",
      "여 알고 있는 사실을 반드시 사실대로 알려야 합니다.  \n",
      "<용어풀이>  \n",
      "-----\n"
     ]
    }
   ],
   "source": [
    "splits = []\n",
    "\n",
    "for index, parent_doc in enumerate(md_header_splits):\n",
    "    #print(\"[Parent Doc Index]\", index, \"------------------------\")\n",
    "    #print(\"--> parent_doc.metadata: \", parent_doc.metadata)\n",
    "    parent_page_content = 'Header of this content is ' + parent_doc.metadata['Header 1'] + '. ' + parent_doc.page_content\n",
    "    #print(\"--> parent_page_content:\", parent_page_content)\n",
    "    \n",
    "    child_docs = text_splitter.split_documents([parent_doc])\n",
    "    \n",
    "    for child_doc in child_docs:\n",
    "        original_child_chunk = child_doc.page_content\n",
    "        CHUNK_CONTENT = original_child_chunk\n",
    "        WHOLE_DOCUMENT = parent_page_content\n",
    "        CONTEXUALIZER_PROMPT_TEMPLATE = f\"\"\"\\\n",
    "<document> \n",
    "{WHOLE_DOCUMENT} \n",
    "</document> \n",
    "Here is the chunk we want to situate within the whole document \n",
    "<chunk> \n",
    "{CHUNK_CONTENT} \n",
    "</chunk> \n",
    "Please give a short succinct context to situate this chunk within the overall document for the purposes of improving search retrieval of the chunk. \n",
    "Mention the title of the header that this chunk belongs to, followed by a short succinct context.\n",
    "Answer in Korean. \n",
    "\"\"\"\n",
    "        llm_reponse=llm_haiku.invoke(input=CONTEXUALIZER_PROMPT_TEMPLATE)\n",
    "        contexual_child_chunk = llm_reponse.content + ' !! ' + original_child_chunk\n",
    "        child_doc.page_content = contexual_child_chunk\n",
    "        print(\"----> contexual_child_chunk: \", contexual_child_chunk)\n",
    "        \n",
    "    splits = splits + child_docs"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "id": "de7a7633-1e3d-43a2-a58a-0000989a3607",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "#splits"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "id": "838ac216-3275-4799-b1d2-80da91419703",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "### 몇개의 청크로 생성되었는지 출력해 봅니다."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "id": "9c71c1ea-9c48-4d93-a9f2-f4dab7bf62a7",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[Header Doc Index] 0 ------------------------\n",
      "  Header 1:  제1조(보험계약의 성립)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: <document_context>\n",
      "제1조(보험계약의 성립): 이 문단은 보험계약의 성립 과정을 설명하고 있습니다. 보험계약은 보험계약자의 청약과 보험회사의 승낙으로 이루어지며, 이하 \"보험계약\"은 \"계약\", \"보험계약자\"는 \"계약자\", \"보험회사\"는 \"회사\"로 표현됩니다.\n",
      "</document_context> !! 보험계약은 보험계약자의 청약과 보험회사의 승낙으로 이루어집니다.(이하 “ 보험계약”은 “ 계약”, “ 보  \n",
      "험계약자” 는 “ 계약자” , “ 보험회사” 는 “ 회사” 라 합니다)\n",
      "\n",
      "\n",
      "[Header Doc Index] 1 ------------------------\n",
      "  Header 1:  제1조(보험계약의 성립)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 내용은 <document>에서 '제1조(보험계약의 성립)'이라는 제목의 헤더 부분에 해당합니다. 이 부분은 보험회사가 계약 청약을 받고 보험료를 받은 경우, 청약일로부터 30일 이내에 승낙 또는 거절 통지를 해야 한다는 내용을 설명하고 있습니다. !! 회사는 계약의 청약을 받고 보험료 전액(보험료를 일시에 지급하기로 약정한 경우) 또는 제1회 보험  \n",
      "료(보험료를 분납하기로 약정한 경우)(이하 ‘ 제1회 보험료 등’ 이라 합니다)를 받은 경우에는 청약일\n",
      "부터 30일 이내에 승낙 또는 거절의 통지를 하며 통지가 없으면 승낙한 것으로 봅니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 2 ------------------------\n",
      "  Header 1:  제1조(보험계약의 성립)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 이 내용은 <제1조(보험계약의 성립)>의 일부로, 보험회사가 고객의 청약을 승낙하거나 거절할 경우 어떤 절차를 거치는지 설명하고 있습니다. 즉, 보험회사가 청약을 승낙하면 지체없이 보험증권을 발급해 주어야 하며, 청약을 거절할 경우에는 거절통지와 함께 받은 금액을 돌려주어야 한다는 내용입니다. !! 회사가 청약을 승낙한 때에는 지체 없이 보험증권(보험가입증서)을 계약자에게 교부하여 드리며, 청  \n",
      "약을 거절한 경우에는 거절통지와 함께 받은 금액을 계약자에게 돌려드립니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 3 ------------------------\n",
      "  Header 1:  제1조(보험계약의 성립)\n",
      "    Header 2:  ④\n",
      "      [Doc page_content]: <document-context>\n",
      "제1조(보험계약의 성립)\n",
      "이 조항은 이미 성립한 보험계약을 연장하거나 변경하는 경우, 보험회사가 보험증권(보험가입증서)에 변경사항을 기재함으로써 새로운 보험증권을 교부하지 않아도 됨을 규정하고 있습니다.\n",
      "</document-context> !! 이미 성립한 계약을 연장하거나 변경하는 경우에는 회사는 보험증권(보험가입증서)에 그 사실을 기  \n",
      "재함으로써 보험증권(보험가입증서)의 교부에 대신할 수 있습니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 4 ------------------------\n",
      "  Header 1:  제2조(약관교부 및 설명의무 등)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 제2조(약관교부 및 설명의무 등)\n",
      "이 문서는 보험계약 체결 시 보험사의 약관 교부 및 설명 의무에 대해 규정하고 있습니다. 이 문서의 핵심 내용은 보험사가 계약자에게 약관과 계약자 보관용 청약서를 제공하고 약관의 중요한 내용을 설명해야 한다는 것입니다. 다만 통신판매 계약의 경우 계약자의 동의를 얻어 전자적 방법으로 약관을 제공할 수 있다고 명시하고 있습니다. !! 회사는 계약자가 청약한 경우 계약자에게 약관 및 계약자 보관용 청약서(청약서 부본)를 드리고 약  \n",
      "관의 중요한 내용을 설명하여 드립니다. 다만, 전화․ 우편․ 컴퓨터 등의 통신매체를 통한 보험계약\n",
      "(이하 “ 통신판매 계약” 이라 합니다)의 경우에는 회사는 계약자의 동의를 얻어 다음 중 한 가지 방\n",
      "법으로 할 수 있습니다.  \n",
      "1. 광기록매체 또는 전자우편 등의 전자적 방법으로 약관이나 계약자 보관용 청약서(청약서 부본)를\n",
      "\n",
      "\n",
      "[Header Doc Index] 5 ------------------------\n",
      "  Header 1:  제2조(약관교부 및 설명의무 등)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: <제2조(약관교부 및 설명의무 등)>\n",
      "이 문서는 보험계약에 관한 약관 조항을 설명하고 있습니다. 해당 chunk는 보험회사가 통신판매 계약의 경우 약관 및 중요사항 설명 방법에 대해 자세히 기술하고 있습니다. 구체적으로는 전자적 방법으로 약관을 송부하거나 사이버몰에서 약관 및 설명문을 제공하는 방법을 명시하고 있습니다. !! 송부하는 방법. 이 경우 계약자 또는 그 대리인이 이를 수신한 때에 당해 약관이나 계약자 보관용\n",
      "청약서(청약서 부본)를 드린 것으로 봅니다.  \n",
      "2. 사이버몰(컴퓨터를 이용하여 보험거래를 할 수 있도록 설정된 가상의 영업장)에서 약관 및 그 설명  \n",
      "문(약관의 중요한 내용을 알 수 있도록 설명한 문서)을 읽거나 내려받게 하는 방법. 이 경우 계약\n",
      "자가 이를 읽거나 내려받은 것을 확인한 때에 당해 약관을 드리고 그 중요한 내용을 설명한 것으\n",
      "\n",
      "\n",
      "[Header Doc Index] 6 ------------------------\n",
      "  Header 1:  제2조(약관교부 및 설명의무 등)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 내용은 <document>의 \"제2조(약관교부 및 설명의무 등)\"에 해당합니다. 이 조항은 보험 계약 체결 시 회사의 약관 교부 및 설명 의무에 대해 규정하고 있으며, 특히 통신판매 계약의 경우 회사가 취할 수 있는 대체 방법들을 명시하고 있습니다. 이 chunk는 그 중 하나의 방법, 즉 전화를 이용한 설명 방법에 대한 내용입니다. !! 로 봅니다.  \n",
      "3. 전화를 이용하여 청약내용, 보험료납입, 보험기간, 계약전 알릴의무, 약관의 중요한 내용 등 계약  \n",
      "체결을 위하여 필요한 사항을 질문 또는 설명하는 방법. 이 경우 계약자의 답변과 확인내용을 음성\n",
      "녹음함으로써 약관의 중요한 내용을 설명한 것으로 봅니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 7 ------------------------\n",
      "  Header 1:  제2조(약관교부 및 설명의무 등)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 내용은 \"제2조(약관교부 및 설명의무 등)\"의 헤더 아래에 위치합니다. 이 조항은 보험회사가 약관과 청약서를 고객에게 제공하고 약관의 중요한 내용을 설명할 의무에 대해 설명하고 있습니다. 또한 고객이 청약서에 자필서명을 하지 않은 경우 계약 체결일로부터 1개월 이내에 계약을 취소할 수 있음을 명시하고 있습니다. !! 회사가 제1항에 의해 제공될 약관 및 계약자 보관용 청약서(청약서 부본)를 청약 시 계약자에게 드  \n",
      "리지 아니하거나 약관의 중요한 내용을 설명하지 아니한 때 또는 계약을 체결할 때 계약자가 청약서\n",
      "에 자필서명[날인(도장을 찍음) 또는 전자서명법 제2조 제10호의 규정에 의한 공인인증기관이 인증\n",
      "한 전자서명을 포함합니다)]을 하지 아니한 때에는 계약자는 계약체결일부터 1개월 이내에 계약을\n",
      "취소할 수 있습니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 8 ------------------------\n",
      "  Header 1:  제2조(약관교부 및 설명의무 등)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 이 문서의 제목은 \"제2조(약관교부 및 설명의무 등)\"입니다. 이 chunk는 해당 조항의 제2항에 해당하며, 계약이 취소된 경우 보험사가 납입한 보험료와 이에 대한 이자를 계약자에게 지급해야 한다는 내용을 담고 있습니다. !! 제2항에 따라 계약이 취소된 경우에는 회사는 이미 납입한 보험료를 계약자에게 돌려드리며, 보험료  \n",
      "를 받은 기간에 대하여 보험개발원이 공시하는 정기예금이율을 연단위 복리로 계산한 금액을 더하여\n",
      "지급합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 9 ------------------------\n",
      "  Header 1:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "이 chunk는 보험계약 체결 시 보험회사가 보장을 개시하는 시점에 대한 내용을 다루고 있습니다. 구체적으로 보험회사가 계약 청약을 승낙하고 제1회 보험료를 받은 때부터 보장을 제공한다는 내용을 포함하고 있습니다. !! 회사는 계약의 청약을 승낙하고 제1회 보험료 등을 받은 때부터 이 약관이 정한 바에 따라 보장을  \n",
      "합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 10 ------------------------\n",
      "  Header 1:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 제3조(제1회 보험료 등 및 회사의 보장개시)는 보험회사가 계약자로부터 제1회 보험료를 받고 청약을 승낙하기 전에 보험금 지급사유가 발생한 경우에도 계약상의 보장을 한다는 내용을 담고 있습니다. 이 조항은 보험회사의 보장 개시 시점과 관련된 규정입니다. !! 회사가 계약자로부터 계약의 청약과 함께 제1회 보험료 등을 받은 경우에 그 청약을 승낙하기 전에  \n",
      "계약에서 정한 보험금 지급사유가 생긴 때에는 회사는 계약상의 보장을 합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 11 ------------------------\n",
      "  Header 1:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 이 문서는 보험 계약에 관한 조항들을 다루고 있습니다. 제3조(제1회 보험료 등 및 회사의 보장개시)의 제2항에서는 보험회사가 보장을 하지 않는 경우를 규정하고 있습니다. 이 chunk는 해당 조항의 내용을 자세히 설명하고 있으며, 보험계약자 또는 피보험자의 행위나 사유로 인해 보험회사가 보장을 하지 않을 수 있는 두 가지 경우를 명시하고 있습니다. !! 제2항의 규정에도 불구하고 회사는 다음 중 한 가지에 해당되는 경우에는 보장을 하지 아니합니다.  \n",
      "1. 제14조(계약전 알릴 의무)의 규정에 의하여 계약자 또는 피보험자가 회사에 알린 내용이 보험금  \n",
      "지급사유의 발생에 영향을 미쳤음을 회사가 증명하는 경우  \n",
      "2. 제12조(보상하지 아니하는 손해), 제16조(계약의 해지), 제18조(계약의 무효) 또는 제27조(사기에  \n",
      "의한 계약)의 규정을 준용하여 회사가 보장을 하지 아니할 수 있는 경우\n",
      "\n",
      "\n",
      "[Header Doc Index] 12 ------------------------\n",
      "  Header 1:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "    Header 2:  ④\n",
      "      [Doc page_content]: 제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "\n",
      "이 문단은 계약자가 제1회 보험료를 자동이체 또는 신용카드로 납입하는 경우와 자동이체 및 매출승인이 불가능한 경우에 대한 내용을 다루고 있습니다. 계약자가 회사에 자동이체 및 신용카드 관련 정보를 제공하면 제1회 보험료 납입으로 간주되지만, 계약자의 귀책사유로 납입이 불가능한 경우에는 실제로 제1회 보험료가 납입되지 않은 것으로 간주됩니다. !! 계약자가 제1회 보험료 등을 자동이체 또는 신용카드로 납입하는 경우에는 자동이체신청 및 신용카  \n",
      "드매출 승인에 필요한 정보를 회사에 제공한 때가 제1회 보험료 등을 납입한 때가 되나, 계약자의\n",
      "귀책사유로 자동이체 또는 매출승인이 불가능한 경우에는 제1회 보험료 등이 납입되지 않은 것으로\n",
      "봅니다.  \n",
      "-----\n",
      "\n",
      "\n",
      "[Header Doc Index] 13 ------------------------\n",
      "  Header 1:  제3조(제1회 보험료 등 및 회사의 보장개시)\n",
      "    Header 2:  ⑤\n",
      "      [Doc page_content]: 이 문장은 '제3조(제1회 보험료 등 및 회사의 보장개시)' 항목에 속하며, 보험 계약이 갱신되는 경우 기존 계약에 의한 보장이 종료되면 이 항목에 의한 보장이 적용된다는 내용입니다. !! 계약이 갱신되는 경우에는 제1항 내지 제3항에 의한 보장은 기존 계약에 의한 보장이 종료하는 때부  \n",
      "터 적용합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 14 ------------------------\n",
      "  Header 1:  제4조(제2회 이후 보험료의 납입)\n",
      "      [Doc page_content]: 이 chunk는 문서의 「제4조(제2회 이후 보험료의 납입)」 부분에 속합니다. 이 조항은 계약자가 제2회 이후의 보험료를 약속한 기일까지 납부해야 하며, 회사는 납입받은 경우 영수증을 발행하지만 금융회사를 통해 납입한 경우에는 그 증빙서류로 대신한다는 내용을 담고 있습니다. !! 계약자는 제2회 이후의 보험료를 계약 체결시 납입하기로 약속한 날(이하납입기일이라 합니다)까\n",
      "지 납입하여야 하며, 회사는 계약자가 보험료를 납입한 경우에는 영수증을 발행하여 드립니다. 다만, 금\n",
      "융회사(우체국을 포함합니다)룰 통하여 보험료를 납입한 경우에는 그 금융회사 발행 증빙서류를 영수증\n",
      "으로 대신합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 15 ------------------------\n",
      "  Header 1:  제5조(청약의 철회)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 문서의 제5조(청약의 철회)에서는 가계성 보험에 한해 계약자가 청약을 한 날로부터 15일 이내에 청약을 철회할 수 있다고 명시하고 있습니다. 단, 단체(취급)계약이나 보험기간 1년 미만 계약, 또는 보험기간 1년 이상의 통신판매 계약의 경우에는 청약 철회가 허용되지 않습니다. !! 가계성 보험[개인의 일상생활과 관련된 보험으로 보험료를 단체 또는 법인이 부담하지 않는 개인보  \n",
      "험계약과 단체요율(피보험자가 단체인 계약에 적용되는 요율)이 적용되지 않는 계약을 말합니다]에\n",
      "한하여 계약자는 청약을 한 날부터 15일 이내에 그 청약을 철회할 수 있습니다. 다만, 단체(취급)계\n",
      "약 또는 보험기간이 1년 미만인 계약의 경우에는 청약을 철회할 수 없으며, 통신판매 계약(보험기간\n",
      "\n",
      "\n",
      "[Header Doc Index] 16 ------------------------\n",
      "  Header 1:  제5조(청약의 철회)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 제5조(청약의 철회)의 일부\n",
      "\n",
      "이 문서는 보험계약에 관한 내용을 다루고 있으며, 그중 제5조에서는 보험 청약의 철회에 대한 규정을 명시하고 있습니다. 제시된 chunk는 이 제5조의 일부로, 통신판매 계약의 경우 청약 철회 기한이 청약일로부터 30일 이내라고 설명하고 있습니다. !! 이 1년 이상인 계약에 한함)의 경우에는 청약을 한 날부터 30일 이내에 그 청약을 철회할 수 있습니\n",
      "다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 17 ------------------------\n",
      "  Header 1:  제5조(청약의 철회)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 문서의 제5조(청약의 철회) 섹션에서는 회사가 고객의 청약 철회 요청을 받은 경우, 3일 이내에 이미 납입한 보험료를 고객에게 반환하여야 하며, 반환이 지연되는 경우 정기예금이율을 적용하여 이자를 더하여 지급해야 한다고 명시하고 있습니다. 다만 고객이 신용카드로 보험료를 납입한 경우에는 회사가 신용카드 매출을 취소하며 이자를 지급하지 않는다는 예외 사항도 포함되어 있습니다. !! 회사는 청약의 철회를 접수한 경우에는 3일 이내에 이미 납입한 보험료를 계약자에게 돌려 드리며,  \n",
      "보험료 반환이 지체된 기간에 대하여는 보험개발원이 공시하는 정기예금이율을 연단위 복리로 계산\n",
      "한 금액을 더하여 지급합니다. 다만, 계약자가 제1회 보험료 등을 신용카드로 납입한 계약의 청약을\n",
      "철회하는 경우에 회사는 신용카드의 매출을 취소하며 이자를 더하여 지급하지 아니합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 18 ------------------------\n",
      "  Header 1:  제5조(청약의 철회)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 이 문서의 헤더 제목은 '제5조(청약의 철회)'입니다. 이 chunk는 보험계약자가 보험금 지급 사유가 이미 발생했음을 알지 못한 상태에서 청약을 철회하려 할 때, 청약 철회의 효력이 발생하지 않는다는 내용입니다. !! 청약을 철회할 당시에 이미 보험금 지급사유가 발생하였으나 계약자가 그 보험금 지급사유의 발생사  \n",
      "실을 알지 못한 경우에는 청약철회의 효력은 발생하지 않습니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 19 ------------------------\n",
      "  Header 1:  제6조(계약내용의 변경 등)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 내용은 <document>의 헤더인 \"제6조(계약내용의 변경 등)\"에 속합니다. 이 조항은 보험계약자가 보험회사의 승낙을 얻어 보험종목, 보험기간, 보험료 납입주기 및 방법, 계약자 및 피보험자 정보 등 계약 내용을 변경할 수 있다는 것을 규정하고 있습니다. !! 계약자는 회사의 승낙을 얻어 다음의 사항을 변경할 수 있습니다. 이 경우 승낙을 서면 등으로 알리  \n",
      "거나 보험증권(보험가입증서)의 뒷면에 기재하여 드립니다.  \n",
      "1. 보험종목\n",
      "2. 보험기간\n",
      "3. 보험료 납입주기, 수금방법 및 납입기간\n",
      "4. 계약자, 피보험자, 보험가입금액 등 기타 계약의 내용\n",
      "\n",
      "\n",
      "[Header Doc Index] 20 ------------------------\n",
      "  Header 1:  제6조(계약내용의 변경 등)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 제6조(계약내용의 변경 등)\n",
      "\n",
      "이 문단은 계약자가 계약체결 1년 이상 경과 후 보험종목의 변경을 요청할 경우, 회사가 사업방법서에 따라 보험종목을 변경할 수 있음을 규정하고 있습니다. !! 회사는 계약자가 제1회 보험료 등을 납입한 때부터 1년 이상 경과된 유효한 계약으로서 그 보험종목  \n",
      "의 변경을 요청할 때에는 회사의 사업방법서에서 정하는 방법에 따라 이를 변경하여 드립니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 21 ------------------------\n",
      "  Header 1:  제6조(계약내용의 변경 등)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 이 문장은 <document>의 제6조(계약내용의 변경 등)에 해당합니다. 이 조항은 계약자가 보험가입금액을 감액하고자 할 때, 그 감액된 부분은 계약이 해지된 것으로 보며, 회사는 관련 보험료를 계약자에게 환급해야 한다는 내용을 명시하고 있습니다. !! 회사는 계약자가 제1항 제4호의 규정에 의하여 보험가입금액을 감액하고자 할 때에는 그 감액된 부  \n",
      "분은 계약이 해지된 것으로 보며, 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는 19조\n",
      "(보험료의 환급)에 따라 이를 계약자에게 지급합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 22 ------------------------\n",
      "  Header 1:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 내용은 <document>의 '제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]'에 해당하는 것으로, 계약자가 보험료를 납입기일까지 납입하지 않아 보험료 납입이 연체된 경우, 회사가 계약자에게 납입최고(독촉) 및 계약 해지 관련 사항을 알려주는 내용입니다. !! 계약자가 제2회 이후의 보험료를 납입기일까지 납입하지 아니하여 보험료 납입이 연체 중인 경우에  \n",
      "는, 회사는 14일(보험기간이 1년 미만인 경우에는 7일) 이상의 기간을 납입최고(독촉)기간으로 정하\n",
      "여 계약자(타인을 위한 계약의 경우 그 특정된 타인을 포함합니다)에게 다음의 내용을 서면(등기우편\n",
      "등), 전화(음성녹음) 또는 전자문서 등으로 알려드립니다. 다만, 계약이 해지되기 전에 발생한 보험금\n",
      "\n",
      "\n",
      "[Header Doc Index] 23 ------------------------\n",
      "  Header 1:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 인용문은 <document>에서 '제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]'의 내용 중 일부를 나타내고 있습니다. 이 부분은 보험료 납입이 연체되었을 때 회사가 계약자에게 통지해야 할 사항들을 설명하고 있습니다. 구체적으로 연체보험료 납입, 계약 해지, 그리고 보험계약대출 원리금 차감 등의 내용을 포함하고 있습니다. !! 지급사유에 대하여 회사는 계약상의 보장을 합니다.  \n",
      "1. 납입최고(독촉)기간 안에 연체보험료를 납입하여야 한다는 내용\n",
      "2. 납입최고(독촉)기간이 끝나는 날까지 보험료를 납입하지 아니할 경우 그 끝나는 날의 다음날에 계  \n",
      "약이 해지된다는 내용  \n",
      "3. 계약자가 회사로부터 보험계약대출을 받은 경우에는, 계약이 해지되는 즉시 해지환급금에서 보험계  \n",
      "약대출 원리금이 차감된다는 내용\n",
      "\n",
      "\n",
      "[Header Doc Index] 24 ------------------------\n",
      "  Header 1:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 chunk는 제7조 [보험료의 납입연체시 납입최고(독촉)와 계약의 해지]의 제1항에 해당되는 내용입니다. 이 조항은 계약자에게 납입최고(독촉) 통지가 도달한 날부터 시작되는 납입최고(독촉)기간과 그 기간의 말일에 관해 설명하고 있습니다. !! 제1항의 납입최고(독촉)기간은 납입최고(독촉)의 통지가 계약자(타인을 위한 계약의 경우에는 그 특  \n",
      "정된 타인을 포함)에게 도달한 날부터 시작되며, 그 기간의 말일(말일이 토요일 또는 공휴일인 경우\n",
      "에는 그 다음의 최초의 평일)에 끝납니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 25 ------------------------\n",
      "  Header 1:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지] \n",
      "이 문서의 제7조에서는 보험료 납입이 연체된 경우 보험회사의 납입최고(독촉) 절차에 대해 규정하고 있습니다. 해당 chunk는 보험회사가 납입최고(독촉)를 전자문서로 안내하고자 할 경우의 절차에 대해 설명하고 있습니다. !! 회사가 제1항에 의한 납입최고(독촉) 등을 전자문서로 안내하고자 할 경우에는 계약자의 서면에 의  \n",
      "한 동의를 얻어 수신확인을 조건으로 전자문서를 송신하여야 하며, 계약자가 전자문서에 대하여 수\n",
      "신을 확인하기 전까지는 그 전자문서는 송신되지 아니한 것으로 봅니다. 회사는 전자문서가 수신되  \n",
      "-----  \n",
      "지 아니한 것으로 확인되는 경우에는 제1항의 납입최고(독촉)기간을 설정하여 제1항에서 정한 내용\n",
      "\n",
      "\n",
      "[Header Doc Index] 26 ------------------------\n",
      "  Header 1:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 이 내용은 「제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]」에 속하는 것으로, 회사가 전자문서로 납입최고(독촉)를 할 경우에 계약자가 이를 확인하지 않으면 해당 전자문서가 전송되지 않은 것으로 간주되며, 이 경우 회사가 서면이나 전화로 다시 납입최고(독촉) 내용을 알려주게 된다는 내용입니다. !! 을 서면(등기우편 등) 또는 전화(음성녹음)로 다시 알려 드립니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 27 ------------------------\n",
      "  Header 1:  제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\n",
      "    Header 2:  ④\n",
      "      [Doc page_content]: 이 문서의 헤더 제목은 \"제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]\"입니다. 이 문서의 해당 부분은 보험계약이 해지된 경우 회사가 계약자에게 환급해야 할 보험료에 대한 내용을 다루고 있습니다. !! 제1항에 따라 계약이 해지된 경우에는 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는  \n",
      "제19조(보험료의 환급)에 따라 이를 계약자에게 지급합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 28 ------------------------\n",
      "  Header 1:  제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 문서의 제8조 「보험료의 납입연체로 인한 해지계약의 부활(효력회복)」에 해당하는 내용입니다. 이 조항에서는 보험료 납입이 연체되어 계약이 해지되었더라도, 계약자가 환급금을 받지 않은 경우 일정 기간 내에 해지 계약의 부활을 청구할 수 있으며, 이때 연체된 보험료와 이자를 납입해야 한다는 내용을 설명하고 있습니다. !! 제7조[보험료의 납입연체시 납입최고(독촉)와 계약의 해지]에 따라 계약이 해지되었으나 계약자가  \n",
      "제19조(보험료의 환급)에 따른 환급금을 받지 아니한 경우 계약자는 해지된 날부터 2년 이내에 회사\n",
      "가 정한 절차에 따라 계약의 부활(효력회복)을 청약할 수 있습니다. 이 경우 회사가 그 청약을 승낙\n",
      "한 때에는 계약자는 부활(효력회복)을 청약한 날까지의 연체된 보험료에 보험개발원이 공시하는 정\n",
      "\n",
      "\n",
      "[Header Doc Index] 29 ------------------------\n",
      "  Header 1:  제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 문구는 「제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]」 항목에 속합니다. 이 항목은 계약이 해지된 경우, 계약자가 계약 부활을 청약할 수 있는 조건과 관련된 내용입니다. 문구는 계약자가 부활을 청약한 경우, 연체된 보험료와 함께 납부해야 할 추가 금액에 대해 설명하고 있습니다. !! 기예금이율 + 1% 범위내에서 각 상품별로 회사가 정하는 이율로 계산한 금액을 더하여 납입하여야\n",
      "합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 30 ------------------------\n",
      "  Header 1:  제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 chunk는 문서의 「제8조[보험료의 납입연체로 인한 해지계약의 부활(효력회복)]」 항목에 속합니다. 이 항목은 보험계약이 해지된 경우, 계약자가 보험료를 납부하여 계약을 부활(효력회복)시키는 절차와 관련된 내용을 다루고 있습니다. 제1항에서는 계약 부활 시 적용되어야 할 기존 조항들을 명시하고 있습니다. !! 제1항에 따라 해지계약을 부활(효력회복)하는 경우에는 제1조(보험계약의 성립), 제3조(제1회 보험료  \n",
      "등 및 회사의 보장개시), 제14조(계약 전 알릴의무) 및 제16조(계약의 해지)의 규정을 준용합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 31 ------------------------\n",
      "  Header 1:  제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 텍스트 청크는 <document>의 제9조 [강제집행 등으로 인한 해지계약의 특별부활(효력회복)]에 속합니다. 이 조항은 타인을 위한 보험계약에서 계약자의 해지환급금에 대한 강제집행 등으로 인해 계약이 해지된 경우, 피보험자가 계약자의 동의를 얻어 회사에 지급한 금액으로 계약을 특별부활할 수 있음을 규정하고 있습니다. !! 타인을 위한 계약의 경우 제19조(보험료의 환급)에 따른 계약자의 해지환급금 청구권에 대한 강제집  \n",
      "행, 담보권실행, 국세 및 지방세 체납처분절차에 의해 계약이 해지된 경우에는, 회사는 해지 당시의\n",
      "피보험자가 계약자의 동의를 얻어 계약 해지로 회사가 채권자에게 지급한 금액을 회사에게 지급하고\n",
      "제6조(계약내용의 변경 등) 제1항의 절차에 따라 계약자 명의를 피보험자로 변경하여 계약의 특별부\n",
      "\n",
      "\n",
      "[Header Doc Index] 32 ------------------------\n",
      "  Header 1:  제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]에 따르면, 타인을 위한 계약의 경우 계약이 해지된 경우에도 피보험자는 계약자의 동의를 얻어 계약의 특별부활(효력회복)을 청약할 수 있음을 회사가 통지하여야 한다는 내용입니다. !! 활(효력회복)을 청약할 수 있음을 피보험자에게 통지하여야 합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 33 ------------------------\n",
      "  Header 1:  제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 chunk는 \"제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\"라는 제목의 헤더 아래에 있습니다. 이 chunk는 회사가 계약자의 명의변경 신청과 계약의 특별부활(효력회복) 청약을 승낙하면 계약이 청약한 때부터 특별부활(효력회복)됨을 설명하고 있습니다. !! 회사는 제1항에 의한 계약자 명의변경 신청 및 계약의 특별부활(효력회복) 청약을 승낙하며, 계약은  \n",
      "청약한 때부터 특별부활(효력회복) 됩니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 34 ------------------------\n",
      "  Header 1:  제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 이 내용은 <document>의 제9조 [강제집행 등으로 인한 해지계약의 특별부활(효력회복)]에 해당합니다. 이 조항은 보험계약이 해지된 경우, 보험회사의 통지 기한과 계약자의 특별부활(효력회복) 신청에 대해 규정하고 있습니다. !! 회사는 제1항의 통지를 계약이 해지된 날부터 7일 이내에 하여야 합니다. 다만, 회사의 통지가 7일  \n",
      "을 경과하여 도달하고 이후 피보험자가 제1항에 의한 계약자 명의변경 신청 및 계약의 특별부활(효\n",
      "력회복)을 청약한 경우에는 계약이 해지된 날부터 7일이 되는 날에 특별부활(효력회복) 됩니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 35 ------------------------\n",
      "  Header 1:  제9조[강제집행 등으로 인한 해지계약의 특별부활(효력회복)]\n",
      "    Header 2:  ④\n",
      "      [Doc page_content]: 이 문구는 <document>의 제9조 [강제집행 등으로 인한 해지계약의 특별부활(효력회복)]에 속합니다. 이 조항에 따르면, 피보험자는 통지를 받은 날로부터 15일 이내에 제1항에 명시된 절차를 이행할 수 있습니다. !! 피보험자는 통지를 받은 날부터 15일 이내에 제1항의 절차를 이행할 수 있습니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 36 ------------------------\n",
      "  Header 1:  제10조(보험목적의 범위)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 chunk는 제10조(보험목적의 범위)에 해당하며, 보험증권에 기재된 건물과 그에 속한 가재들이 보험의 목적이 됨을 설명하고 있습니다. 구체적으로 주택으로만 쓰이는 건물과 주택병용 물건으로 사용되는 건물 및 그 수용가재들이 보험의 목적에 포함됨을 명시하고 있습니다. !! 이 약관에서 보험의 목적이라 함은 이 약관에 따라 보험에 가입한 물건으로서 보험증권(보험가입증  \n",
      "서)에 기재된 건물 등을 말합니다.  \n",
      "1. 주택으로만 쓰이는 건물 중 다음의 것 또는 그 수용가재  \n",
      "(ⅰ) 단독주택\n",
      "(ⅱ) 주택의 부속건물로서 가재만을 수용하는데 쓰이는 것\n",
      "(ⅲ) 연립(다세대)주택, 아파트로서 각 호(戶), 실(室)이 모두 주택으로만 쓰이는 것  \n",
      "2. 주택병용 물건으로서 아래의 용도로 사용하는 건물 및 그 수용가재\n",
      "\n",
      "\n",
      "[Header Doc Index] 37 ------------------------\n",
      "  Header 1:  제10조(보험목적의 범위)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 내용은 제10조(보험목적의 범위)에 포함되는 것으로, 보험의 목적이 되는 건물 및 수용가재의 범위를 설명하고 있습니다. 그 중 주택병용 물건으로서 교습소와 치료 용도로 사용되는 건물 및 수용가재에 대해 구체적으로 명시하고 있습니다. !! (ⅰ) 교습소(피아노, 꽃꽂이, 국악, 재봉 및 이와 비슷한 것)\n",
      "(ⅱ) 치료(안수, 침구(침질,뜸질), 정골, 조산원 및 이와 비슷한 것)\n",
      "\n",
      "\n",
      "[Header Doc Index] 38 ------------------------\n",
      "  Header 1:  제10조(보험목적의 범위)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 문단은 <document>의 제10조(보험목적의 범위)에 해당합니다. 이 조항에서는 보험의 목적이 되는 물건들을 구체적으로 열거하고 있습니다. 이 문단은 보험의 대상이 되는 물건들의 범위와 종류를 설명하고 있습니다. !! 아래의 물건은 보험증권(보험가입증서)에 기재하여야만 보험의 목적이 됩니다.  \n",
      "1. 통화, 유가증권, 인지, 우표 및 이와 비슷한 것\n",
      "2. 귀금속, 귀중품(무게나 부피가 휴대할 수 있으며 점당 300만원 이상), 보옥, 보석, 글․ 그림, 골동품,  \n",
      "조각물 및 이와 비슷한 것  \n",
      "3. 원고, 설계서, 도안, 물건의 원본, 모형, 증서, 장부, 금형(쇠틀), 목형(나무틀), 소프트웨어 및 이와  \n",
      "비슷한 것\n",
      "\n",
      "\n",
      "[Header Doc Index] 39 ------------------------\n",
      "  Header 1:  제10조(보험목적의 범위)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 이 chunk는 문서의 \"제10조(보험목적의 범위)\" 부분에 해당합니다. 이 조항에서는 보험의 목적에 포함되는 물건들을 구체적으로 명시하고 있습니다. 건물과 가재도구에 대한 기준을 제시하여 보험 적용 범위를 규정하고 있습니다. !! 아래의 물건은 다른 약정이 없으면 보험의 목적에 포함됩니다.  \n",
      "1. 건물인 경우\n",
      "(ⅰ)건물의 부속물: 피보험자의 소유인 칸막이, 대문, 담, 곳간 및 이와 비슷한 것\n",
      "(ⅱ)건물의 부착물: 피보험자 소유인 간판, 네온사인, 안테나, 선전탑 및 이와 비슷한 것\n",
      "2. 가재인 경우: 피보험자와 같은 세대에 속하는 사람의 소유물\n",
      "\n",
      "\n",
      "[Header Doc Index] 40 ------------------------\n",
      "  Header 1:  제11조(보상하는 손해)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 청크는 문서의 \"제11조(보상하는 손해)\" 부분에 속합니다. 이 조항에서는 회사가 보험의 목적이 화재, 폭발 또는 파열로 인해 발생한 직접 손해, 소방 손해, 피난 손해를 보상해 주는 내용을 다루고 있습니다. !! 회사는 보험의 목적이 화재(벼락을 포함합니다), 폭발 또는 파열(이하「사고」라 합니다)로 입은 아래  \n",
      "-----  \n",
      "의 손해를 보상하여 드립니다.  \n",
      "1. 사고에 따른 직접손해\n",
      "2. 사고에 따른 소방손해(화재진압과정에서 발생하는 손해)\n",
      "3. 사고에 따른 피난손해(피난지에서 5일 동안에 보험의 목적에 생긴 위 제1호 및 제2호의 손해를 포  \n",
      "함합니다)\n",
      "\n",
      "\n",
      "[Header Doc Index] 41 ------------------------\n",
      "  Header 1:  제11조(보상하는 손해)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 청크는 문서의 <document>태그 내부에 있는 「제11조(보상하는 손해)」라는 헤더 아래에 속합니다. 이 헤더에서는 회사가 제1항에서 보장하는 위험으로 인해 발생한 손해에 대해 계약자 또는 피보험자가 지출한 특정 비용을 추가로 지급한다는 내용을 다루고 있습니다. !! 회사는 제1항에서 보장하는 위험으로 인하여 손해가 발생한 경우 계약자 또는 피보험자가 지출한 아  \n",
      "래의 비용을 추가로 지급합니다.  \n",
      "1. 잔존물 제거비용: 사고현장에서의 잔존물의 해체비용, 청소비용(사고현장 및 인근 지역의 토양, 대  \n",
      "기 및 수질 오염물질 제거비용과 차에 실은 후 폐기물 처리비용은 포함되지 아니합니다) 및 차에\n",
      "싣는 비용. 다만, 제1항에서 보장하지 아니하는 위험으로 보험의 목적이 손해를 입거나 관계법령에\n",
      "\n",
      "\n",
      "[Header Doc Index] 42 ------------------------\n",
      "  Header 1:  제11조(보상하는 손해)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 문단은 「제11조(보상하는 손해)」 헤더에 속합니다. 회사는 특정한 위험으로 인해 발생한 손해에 대해 계약자 또는 피보험자가 지출한 비용을 추가로 지급하는데, 이 문단은 그 중 손해방지비용, 대위권 보전비용, 잔존물 보전비용에 대해 설명하고 있습니다. !! 의하여 제거됨으로써 생긴 손해에 대하여는 보상하여 드리지 아니합니다.  \n",
      "2. 손해방지비용: 손해의 방지 또는 경감을 위하여 지출한 필요 또는 유익한 비용\n",
      "3. 대위권 보전비용: 제3자로부터 손해의 배상을 받을 수 있는 경우에는 그 권리를 지키거나 행사하기  \n",
      "위하여 지출한 필요 또는 유익한 비용  \n",
      "4. 잔존물 보전비용: 잔존물을 보전하기 위하여 지출한 필요 또는 유익한 비용. 다만, 제30조(잔존물)\n",
      "\n",
      "\n",
      "[Header Doc Index] 43 ------------------------\n",
      "  Header 1:  제11조(보상하는 손해)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 부분은 <document>의 제11조(보상하는 손해)에 해당합니다. 이 조항에서는 회사가 보장하는 위험으로 인해 발생한 손해에 대해 회사가 추가적으로 지급하는 비용에 대해 설명하고 있습니다. 이 부분은 잔존물 보전비용과 기타 협력비용에 대해 다루고 있습니다. !! 에 의해 회사가 잔존물을 취득한 경우에 한합니다.  \n",
      "5. 기타 협력비용: 회사의 요구에 따르기 위하여 지출한 필요 또는 유익한 비용\n",
      "\n",
      "\n",
      "[Header Doc Index] 44 ------------------------\n",
      "  Header 1:  제12조(보상하지 아니하는 손해)\n",
      "      [Doc page_content]: 이 내용은 제12조(보상하지 아니하는 손해)에 해당합니다. 이 조항은 회사가 보상하지 않는 손해의 사유들을 열거하고 있습니다. 제시된 chunk는 그 중 계약자 또는 피보험자의 고의나 과실, 화재나 폭발로 인한 분실, 자연발열이나 자연발화로 인한 손해 등을 구체적으로 명시하고 있습니다. !! 회사는 아래의 사유로 인한 손해는 보상하여 드리지 아니합니다.  \n",
      "1. 계약자, 피보험자(법인인 경우에는 그 이사 또는 법인의 업무를 집행하는 그 밖의 기관) 또는 이들  \n",
      "의 법정대리인의 고의 또는 중대한 과실  \n",
      "2. 화재, 폭발 또는 파열이 발생했을 때의 분실로 생긴 손해\n",
      "3. 보험의 목적의 발효, 자연발열, 자연발화로 생긴 손해. 그러나, 자연발열 또는 자연발화로 연소된  \n",
      "다른 보험의 목적에 생긴 손해는 보상하여 드립니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 45 ------------------------\n",
      "  Header 1:  제12조(보상하지 아니하는 손해)\n",
      "      [Doc page_content]: 이 chunk는 문서의 제12조(보상하지 아니하는 손해) 항목에 속합니다. 이 조항은 회사가 보상하지 않는 손해의 종류를 나열하고 있으며, 여기에는 수도관, 수관, 수압기 등의 파열로 인한 손해와 전기기기의 전기적 사고로 생긴 손해가 포함됩니다. 다만 전기사고로 인한 화재, 폭발, 파열 손해는 예외적으로 보상해 준다고 명시되어 있습니다. !! 4. 화재, 폭발 또는 파열로 인하지 아니한 수도관, 수관, 수압기 등의 파열로 생긴 손해\n",
      "5. 발전기, 여자기(정류기 포함), 변류기, 변압기, 전압조정기, 축전기, 개폐기, 차단기, 피뢰기, 배전반  \n",
      "및 그 밖의 전기기기 또는 장치의 전기적 사고로 생긴 손해. 그러나 그 결과로 생긴 화재, 폭발, 파\n",
      "열손해는 보상하여 드립니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 46 ------------------------\n",
      "  Header 1:  제12조(보상하지 아니하는 손해)\n",
      "      [Doc page_content]: 이 청구는 문서의 '제12조(보상하지 아니하는 손해)' 섹션에 속합니다. 이 섹션에서는 회사가 보상하지 않는 특정한 손해에 대해 설명하고 있습니다. 제6호와 제7호는 자연재해, 전쟁, 방사능 관련 사고로 인한 손해에 대해 다루고 있습니다. !! 열손해는 보상하여 드립니다.  \n",
      "6. 원인의 직접, 간접을 묻지 아니하고 지진, 분화 또는 전쟁, 혁명, 내란, 사변, 폭동, 소요, 노동쟁의,  \n",
      "기타 이들과 유사한 사태로 생긴 화재 및 연소 또는 그 밖의 손해  \n",
      "7. 핵연료물질 (사용된 연료를 포함합니다. 이하 같습니다) 또는 핵연료 물질에 의하여 오염된 물질  \n",
      "(원자핵 분열 생성물을 포함합니다)의 방사성, 폭발성 그 밖의 유해한 특성 또는 이들의 특성에 의\n",
      "한 사고로 인한 손해\n",
      "\n",
      "\n",
      "[Header Doc Index] 47 ------------------------\n",
      "  Header 1:  제12조(보상하지 아니하는 손해)\n",
      "      [Doc page_content]: 이 내용은 <document>의 제12조(보상하지 아니하는 손해)에 포함되어 있습니다. 이 조항은 보험회사가 보상하지 않는 손해에 대해 규정하고 있습니다. 해당 chunk는 방사선 및 방사능 오염으로 인한 손해와 국가/지자체의 명령에 따른 재산 소각 등 보험회사가 보상하지 않는 손해에 대한 내용을 포함하고 있습니다. !! 한 사고로 인한 손해  \n",
      "8. 위 제7호 이외의 방사선을 쬐는 것 또는 방사능 오염으로 인한 손해\n",
      "9. 국가 및 지방자치단체의 명령에 의한 재산의 소각 및 이와 유사한 손해\n",
      "\n",
      "\n",
      "[Header Doc Index] 48 ------------------------\n",
      "  Header 1:  제13조(보험금 등의 지급한도)\n",
      "    Header 2:  ①\n",
      "      [Doc page_content]: 이 문서의 제13조(보험금 등의 지급한도)에서는 제11조(보상하는 손해)에 명시된 손해에 대한 보험금 지급 한도와 잔존물 제거비용에 대해 규정하고 있습니다. 이 조항에 따르면 보험금과 잔존물 제거비용의 합계액은 보험증권에 기재된 보험가입금액을 초과할 수 없으며, 잔존물 제거비용은 손해액의 10%를 넘을 수 없습니다. !! 제11조(보상하는 손해)제1항의 손해에 의한 보험금과 제11조(보상하는 손해)제2항의 잔존물 제거비  \n",
      "용은 각각 제23조(지급보험금의 계산)를 준용하여 계산하며, 그 합계액은 보험증권(보험가입증서)에\n",
      "기재된 보험가입금액을 한도로 합니다. 다만, 잔존물 제거비용은 손해액의 10%를 초과할 수 없습니\n",
      "다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 49 ------------------------\n",
      "  Header 1:  제13조(보험금 등의 지급한도)\n",
      "    Header 2:  ②\n",
      "      [Doc page_content]: 이 문구는 '제13조(보험금 등의 지급한도)'의 내용에 해당합니다. 이 조항은 제11조에서 규정한 비용손해 중 손해방지비용, 대위권 보전비용 및 잔존물 보전비용이 보험가입금액을 초과하더라도 지급하는 것을 규정하고 있습니다. !! 제11조(보상하는 손해)제2항의 비용손해 중 손해방지비용, 대위권 보전비용 및 잔존물 보전비용은  \n",
      "제23조(지급보험금의 계산)를 준용하여 계산한 금액이 보험가입금액을 초과하는 경우에도 이를 지급\n",
      "합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 50 ------------------------\n",
      "  Header 1:  제13조(보험금 등의 지급한도)\n",
      "    Header 2:  ③\n",
      "      [Doc page_content]: 이 문서의 헤더는 '제13조(보험금 등의 지급한도)'입니다. 이 문서의 해당 chunk는 보험가입금액을 초과한 경우에도 전액 지급하는 기타 협력비용에 대한 내용입니다. !! 제11조(보상하는 손해)제2항의 비용손해 중 기타 협력비용은 보험가입금액을 초과한 경우에도 이를  \n",
      "전액 지급합니다.\n",
      "\n",
      "\n",
      "[Header Doc Index] 51 ------------------------\n",
      "  Header 1:  제14조(계약전 알릴 의무)\n",
      "      [Doc page_content]: 이 문구는 제14조(계약전 알릴 의무)의 내용에 해당합니다. 이 조항에서는 계약자, 피보험자 또는 이들의 대리인이 청약서에 기재된 질문사항에 대해 알고 있는 사실을 사실대로 알려야 한다고 명시하고 있습니다. !! 계약자, 피보험자 또는 이들의 대리인은 청약시 청약서(질문서를 포함합니다)에서 질문한 사항에 대하\n",
      "여 알고 있는 사실을 반드시 사실대로 알려야 합니다.  \n",
      "<용어풀이>  \n",
      "-----\n",
      "\n",
      "\n"
     ]
    }
   ],
   "source": [
    "for index, doc in enumerate(splits):\n",
    "    print(\"[Header Doc Index]\", index, \"------------------------\")\n",
    "    print(\"  Header 1: \", doc.metadata['Header 1'])\n",
    "    \n",
    "    if 'Header 2' in doc.metadata :\n",
    "        print(\"    Header 2: \", doc.metadata['Header 2'])\n",
    "    \n",
    "    print(\"      [Doc page_content]:\", doc.page_content)\n",
    "    print(\"\")\n",
    "    print(\"\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "c8ef77e4-6144-4bd0-b8bc-897e665e2aeb",
   "metadata": {},
   "source": [
    "# VectorDB 로 임베딩해서 저장"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "1417221f-9e9c-46a2-a6a7-3660bcdbd716",
   "metadata": {},
   "source": [
    "### 위에서 생성한 child chunk를 embedding해서 Chroma vector store에 저장"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "id": "c0a90bf1-ece8-498c-8475-f2ee418f69e4",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "%%capture\n",
    "!pip install chromadb"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 32,
   "id": "fd08ddb8-7f5a-4bf7-870c-28ee3b812c7d",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "from langchain.vectorstores import Chroma\n",
    "\n",
    "vector_store = Chroma.from_documents(documents=splits,\n",
    "                                     embedding=BedrockEmbeddings()\n",
    "                                    )"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "139d07c2-5d72-45b7-b09c-f22128dea882",
   "metadata": {},
   "source": [
    "# Q&A Retrieval Chain"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 33,
   "id": "5099951d-2798-4796-b4fb-e1e1f6694be0",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "document_prompt = PromptTemplate(\n",
    "        input_variables=[\"page_content\"],\n",
    "        template=\"Context:\\ncontent:{page_content}\\n\",\n",
    "    )"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 34,
   "id": "7cfb6453-4d0a-42fb-83c3-68d00eb98cde",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "QUERY_PROMPT_TEMPLATE = \"\"\"\\\n",
    "H:\n",
    "Answer the question based on the provided context. Do not create false information. Answer only in the provided contexts.\n",
    "{context}\n",
    "Question: {question}\n",
    "A:\n",
    "\"\"\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 35,
   "id": "db7a6261-a1eb-4b67-a2ca-91a799e25857",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "from langchain.chains.combine_documents.stuff import StuffDocumentsChain\n",
    "from langchain.chains.llm import LLMChain"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 36,
   "id": "40d056a2-a402-4fe2-8074-66a0b0b9aab2",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "QA_CHAIN_PROMPT = PromptTemplate.from_template(QUERY_PROMPT_TEMPLATE) # prompt_template defined above"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 37,
   "id": "40781d78-244a-4782-9b63-5cb8313c4260",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/tmp/ipykernel_14356/2127955414.py:1: LangChainDeprecationWarning: The class `LLMChain` was deprecated in LangChain 0.1.17 and will be removed in 1.0. Use :meth:`~RunnableSequence, e.g., `prompt | llm`` instead.\n",
      "  llm_chain = LLMChain(llm=llm_text, prompt=QA_CHAIN_PROMPT, callbacks=None, verbose=True)\n"
     ]
    }
   ],
   "source": [
    "llm_chain = LLMChain(llm=llm_text, prompt=QA_CHAIN_PROMPT, callbacks=None, verbose=True)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 38,
   "id": "a7f085b6-70f6-480c-a35b-c9a46dfadafc",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/tmp/ipykernel_14356/3771212169.py:1: LangChainDeprecationWarning: This class is deprecated. Use the `create_stuff_documents_chain` constructor instead. See migration guide here: https://python.langchain.com/docs/versions/migrating_chains/stuff_docs_chain/\n",
      "  combine_documents_chain = StuffDocumentsChain(\n"
     ]
    }
   ],
   "source": [
    "combine_documents_chain = StuffDocumentsChain(\n",
    "        llm_chain=llm_chain,\n",
    "        document_variable_name=\"context\",\n",
    "        document_prompt=document_prompt,\n",
    "        callbacks=None,\n",
    "    )"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 39,
   "id": "81ac63a8-3def-4b1e-8f04-9142a3acd577",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/tmp/ipykernel_14356/232904612.py:1: LangChainDeprecationWarning: This class is deprecated. Use the `create_retrieval_chain` constructor instead. See migration guide here: https://python.langchain.com/docs/versions/migrating_chains/retrieval_qa/\n",
      "  qa = RetrievalQA(\n"
     ]
    }
   ],
   "source": [
    "qa = RetrievalQA(\n",
    "        combine_documents_chain=combine_documents_chain,\n",
    "        callbacks=None,\n",
    "        verbose=True,\n",
    "        retriever=vector_store.as_retriever(search_kwargs={'k': 5}),\n",
    "        return_source_documents=True,\n",
    "    )"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "d36346f6-60e4-47ad-90a2-89d8592dfe8a",
   "metadata": {},
   "source": [
    "# 질문에 대한 답변 테스트"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 40,
   "id": "8ed9b7e3-c6aa-4ddb-9047-c4a26c2dab6b",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "question = '회사의 요구에 따르기 위하여 지출한 비용은 보상 받을 수 있나요?'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 41,
   "id": "fd601a4c-4a15-4332-a8b9-2c6237bc287e",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/tmp/ipykernel_14356/3271077376.py:1: LangChainDeprecationWarning: The method `Chain.__call__` was deprecated in langchain 0.1.0 and will be removed in 1.0. Use :meth:`~invoke` instead.\n",
      "  res = qa(question)\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n",
      "\n",
      "\u001b[1m> Entering new RetrievalQA chain...\u001b[0m\n",
      "\n",
      "\n",
      "\u001b[1m> Entering new LLMChain chain...\u001b[0m\n",
      "Prompt after formatting:\n",
      "\u001b[32;1m\u001b[1;3mH:\n",
      "Answer the question based on the provided context. Do not create false information. Answer only in the provided contexts.\n",
      "Context:\n",
      "content:이 부분은 <document>의 제11조(보상하는 손해)에 해당합니다. 이 조항에서는 회사가 보장하는 위험으로 인해 발생한 손해에 대해 회사가 추가적으로 지급하는 비용에 대해 설명하고 있습니다. 이 부분은 잔존물 보전비용과 기타 협력비용에 대해 다루고 있습니다. !! 에 의해 회사가 잔존물을 취득한 경우에 한합니다.  \n",
      "5. 기타 협력비용: 회사의 요구에 따르기 위하여 지출한 필요 또는 유익한 비용\n",
      "\n",
      "\n",
      "Context:\n",
      "content:이 청크는 문서의 <document>태그 내부에 있는 「제11조(보상하는 손해)」라는 헤더 아래에 속합니다. 이 헤더에서는 회사가 제1항에서 보장하는 위험으로 인해 발생한 손해에 대해 계약자 또는 피보험자가 지출한 특정 비용을 추가로 지급한다는 내용을 다루고 있습니다. !! 회사는 제1항에서 보장하는 위험으로 인하여 손해가 발생한 경우 계약자 또는 피보험자가 지출한 아  \n",
      "래의 비용을 추가로 지급합니다.  \n",
      "1. 잔존물 제거비용: 사고현장에서의 잔존물의 해체비용, 청소비용(사고현장 및 인근 지역의 토양, 대  \n",
      "기 및 수질 오염물질 제거비용과 차에 실은 후 폐기물 처리비용은 포함되지 아니합니다) 및 차에\n",
      "싣는 비용. 다만, 제1항에서 보장하지 아니하는 위험으로 보험의 목적이 손해를 입거나 관계법령에\n",
      "\n",
      "\n",
      "Context:\n",
      "content:이 문단은 「제11조(보상하는 손해)」 헤더에 속합니다. 회사는 특정한 위험으로 인해 발생한 손해에 대해 계약자 또는 피보험자가 지출한 비용을 추가로 지급하는데, 이 문단은 그 중 손해방지비용, 대위권 보전비용, 잔존물 보전비용에 대해 설명하고 있습니다. !! 의하여 제거됨으로써 생긴 손해에 대하여는 보상하여 드리지 아니합니다.  \n",
      "2. 손해방지비용: 손해의 방지 또는 경감을 위하여 지출한 필요 또는 유익한 비용\n",
      "3. 대위권 보전비용: 제3자로부터 손해의 배상을 받을 수 있는 경우에는 그 권리를 지키거나 행사하기  \n",
      "위하여 지출한 필요 또는 유익한 비용  \n",
      "4. 잔존물 보전비용: 잔존물을 보전하기 위하여 지출한 필요 또는 유익한 비용. 다만, 제30조(잔존물)\n",
      "\n",
      "\n",
      "Context:\n",
      "content:이 문장은 <document>의 제6조(계약내용의 변경 등)에 해당합니다. 이 조항은 계약자가 보험가입금액을 감액하고자 할 때, 그 감액된 부분은 계약이 해지된 것으로 보며, 회사는 관련 보험료를 계약자에게 환급해야 한다는 내용을 명시하고 있습니다. !! 회사는 계약자가 제1항 제4호의 규정에 의하여 보험가입금액을 감액하고자 할 때에는 그 감액된 부  \n",
      "분은 계약이 해지된 것으로 보며, 이로 인하여 회사가 환급하여야 할 보험료가 있을 경우에는 19조\n",
      "(보험료의 환급)에 따라 이를 계약자에게 지급합니다.\n",
      "\n",
      "\n",
      "Context:\n",
      "content:이 내용은 제12조(보상하지 아니하는 손해)에 해당합니다. 이 조항은 회사가 보상하지 않는 손해의 사유들을 열거하고 있습니다. 제시된 chunk는 그 중 계약자 또는 피보험자의 고의나 과실, 화재나 폭발로 인한 분실, 자연발열이나 자연발화로 인한 손해 등을 구체적으로 명시하고 있습니다. !! 회사는 아래의 사유로 인한 손해는 보상하여 드리지 아니합니다.  \n",
      "1. 계약자, 피보험자(법인인 경우에는 그 이사 또는 법인의 업무를 집행하는 그 밖의 기관) 또는 이들  \n",
      "의 법정대리인의 고의 또는 중대한 과실  \n",
      "2. 화재, 폭발 또는 파열이 발생했을 때의 분실로 생긴 손해\n",
      "3. 보험의 목적의 발효, 자연발열, 자연발화로 생긴 손해. 그러나, 자연발열 또는 자연발화로 연소된  \n",
      "다른 보험의 목적에 생긴 손해는 보상하여 드립니다.\n",
      "\n",
      "Question: 회사의 요구에 따르기 위하여 지출한 비용은 보상 받을 수 있나요?\n",
      "A:\n",
      "\u001b[0m\n",
      "\n",
      "\u001b[1m> Finished chain.\u001b[0m\n",
      "\n",
      "\u001b[1m> Finished chain.\u001b[0m\n"
     ]
    }
   ],
   "source": [
    "res = qa(question)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 42,
   "id": "9b80caf0-f6be-4be1-9d1a-ce2acaf425b0",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "네, 회사의 요구에 따르기 위하여 지출한 필요 또는 유익한 비용은 보상 받을 수 있습니다. \n",
      "\n",
      "제시된 컨텍스트에 따르면, 제11조(보상하는 손해)에서 다음과 같이 명시하고 있습니다:\n",
      "\n",
      "\"5. 기타 협력비용: 회사의 요구에 따르기 위하여 지출한 필요 또는 유익한 비용\"\n",
      "\n",
      "이는 회사가 보장하는 위험으로 인해 발생한 손해에 대해 회사가 추가적으로 지급하는 비용 중 하나로 포함되어 있습니다.\n"
     ]
    }
   ],
   "source": [
    "print(res['result'])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "bf937a48-e105-45c2-8d59-1ab482d337e1",
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "87f735f6-3179-41f1-9e0e-bb631ce5661b",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "conda_python3",
   "language": "python",
   "name": "conda_python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.10.13"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
